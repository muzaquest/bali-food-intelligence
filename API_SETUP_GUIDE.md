# ğŸš€ Ğ Ğ£ĞšĞĞ’ĞĞ”Ğ¡Ğ¢Ğ’Ğ ĞŸĞ ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ• API Ğ˜ĞĞ¢Ğ•Ğ“Ğ ĞĞ¦Ğ˜Ğ™

## ğŸ“‹ Ğ¡ĞŸĞ˜Ğ¡ĞĞš ĞĞ•ĞĞ‘Ğ¥ĞĞ”Ğ˜ĞœĞ«Ğ¥ API ĞšĞ›Ğ®Ğ§Ğ•Ğ™

### 1. ğŸŒ¤ï¸ OpenWeatherMap API
- **Ğ¡Ğ°Ğ¹Ñ‚**: https://openweathermap.org/api
- **Ğ¦ĞµĞ½Ğ°**: Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾ Ğ´Ğ¾ 1000 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²/Ğ´ĞµĞ½ÑŒ, $40/Ğ¼ĞµÑÑÑ† Ğ·Ğ° 100,000 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- **Ğ§Ñ‚Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼**: Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ°, Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ· Ğ½Ğ° 5 Ğ´Ğ½ĞµĞ¹, Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ

### 2. ğŸ“… Calendarific API
- **Ğ¡Ğ°Ğ¹Ñ‚**: https://calendarific.com/
- **Ğ¦ĞµĞ½Ğ°**: Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾ Ğ´Ğ¾ 1000 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²/Ğ¼ĞµÑÑÑ†, $15/Ğ¼ĞµÑÑÑ† Ğ·Ğ° 10,000 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- **Ğ§Ñ‚Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼**: ĞŸÑ€Ğ°Ğ·Ğ´Ğ½Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ğ»ÑĞ±Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ°Ğ½Ñ‹, Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ Ğ˜Ğ½Ğ´Ğ¾Ğ½ĞµĞ·Ğ¸Ñ

### 3. ğŸ¤– OpenAI API
- **Ğ¡Ğ°Ğ¹Ñ‚**: https://platform.openai.com/
- **Ğ¦ĞµĞ½Ğ°**: ~$20-200/Ğ¼ĞµÑÑÑ† Ğ² Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¾Ñ‚ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- **Ğ§Ñ‚Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼**: GPT-4 Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğ¹ Ğ¸ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¹

### 4. ğŸ“Š Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°
- **Ğ¢Ğ¸Ğ¿**: SQLite, MySQL, PostgreSQL Ğ¸Ğ»Ğ¸ REST API
- **Ğ¦ĞµĞ½Ğ°**: Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°
- **Ğ§Ñ‚Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼**: ĞĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ°Ñ…, Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ñ…, Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ°Ñ…

---

## ğŸ”§ ĞŸĞĞ¨ĞĞ“ĞĞ’ĞĞ¯ ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ

### Ğ¨Ğ°Ğ³ 1: ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ API ĞºĞ»ÑÑ‡ĞµĞ¹

#### OpenWeatherMap
1. Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞ¹Ñ‚ĞµÑÑŒ Ğ½Ğ° https://openweathermap.org/
2. ĞŸĞµÑ€ĞµĞ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² Ñ€Ğ°Ğ·Ğ´ĞµĞ» "API keys"
3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ»ÑÑ‡ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
4. Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ĞºĞ»ÑÑ‡ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`)

#### Calendarific
1. Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞ¹Ñ‚ĞµÑÑŒ Ğ½Ğ° https://calendarific.com/
2. ĞŸĞµÑ€ĞµĞ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² Dashboard
3. Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ²Ğ°Ñˆ API ĞºĞ»ÑÑ‡
4. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚Ğµ ĞºĞ»ÑÑ‡ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: `1234567890abcdef1234567890abcdef12345678`)

#### OpenAI
1. Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞ¹Ñ‚ĞµÑÑŒ Ğ½Ğ° https://platform.openai.com/
2. ĞŸĞµÑ€ĞµĞ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² Ñ€Ğ°Ğ·Ğ´ĞµĞ» "API Keys"
3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ ÑĞµĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ ĞºĞ»ÑÑ‡
4. Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ĞºĞ»ÑÑ‡ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: `sk-1234567890abcdef1234567890abcdef12345678`)

### Ğ¨Ğ°Ğ³ 2: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ» `config.json`:

```json
{
  "weather_api_key": "YOUR_OPENWEATHERMAP_API_KEY",
  "holiday_api_key": "YOUR_CALENDARIFIC_API_KEY", 
  "openai_api_key": "YOUR_OPENAI_API_KEY",
  "openai_model": "gpt-4",
  "database_config": {
    "type": "sqlite",
    "file_path": "client_data.db"
  }
}
```

### Ğ¨Ğ°Ğ³ 3: Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹

```bash
pip install requests openai pandas numpy scikit-learn
```

### Ğ¨Ğ°Ğ³ 4: Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¹

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ» `test_apis.py`:

```python
#!/usr/bin/env python3
import json
from api_integrations.master_integrator import MasterIntegrator

# Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
with open('config.json', 'r') as f:
    config = json.load(f)

# Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ‚Ğ¾Ñ€
integrator = MasterIntegrator(config)

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
health = integrator.get_system_health()
print(f"Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹: {health['overall_status']}")

for service, status in health['services'].items():
    print(f"- {service}: {status['status']}")

# Ğ¢ĞµÑÑ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ñ€ĞµÑÑ‚Ğ¾Ñ€Ğ°Ğ½Ğ°
try:
    analysis = integrator.analyze_restaurant_performance(1, '2024-01-15')
    print(f"\nâœ… ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ñ€ĞµÑÑ‚Ğ¾Ñ€Ğ°Ğ½Ğ° ÑƒÑĞ¿ĞµÑˆĞµĞ½")
    print(f"ĞÑ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶: {analysis['sales_analysis']['difference_percent']:+.1f}%")
except Exception as e:
    print(f"âŒ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°: {e}")
```

---

## ğŸ”„ ĞšĞĞĞ¤Ğ˜Ğ“Ğ£Ğ ĞĞ¦Ğ˜Ğ˜ Ğ”Ğ›Ğ¯ Ğ ĞĞ—ĞĞ«Ğ¥ Ğ‘ĞĞ— Ğ”ĞĞĞĞ«Ğ¥

### SQLite (Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ±Ğ°Ğ·Ğ°)
```json
{
  "database_config": {
    "type": "sqlite",
    "file_path": "client_data.db"
  }
}
```

### MySQL
```json
{
  "database_config": {
    "type": "mysql",
    "host": "localhost",
    "port": 3306,
    "database": "restaurant_analytics",
    "username": "your_username",
    "password": "your_password"
  }
}
```

### PostgreSQL
```json
{
  "database_config": {
    "type": "postgresql",
    "host": "localhost",
    "port": 5432,
    "database": "restaurant_analytics",
    "username": "your_username",
    "password": "your_password"
  }
}
```

### REST API
```json
{
  "database_config": {
    "type": "api",
    "api_url": "https://api.client.com/v1",
    "api_key": "your_api_key"
  }
}
```

---

## ğŸ§ª Ğ¢Ğ•Ğ¡Ğ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• ĞšĞĞ–Ğ”ĞĞ“Ğ API

### Ğ¢ĞµÑÑ‚ API Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ñ‹
```python
from api_integrations.weather_service import WeatherService

weather = WeatherService("YOUR_OPENWEATHERMAP_API_KEY")
impact = weather.get_weather_impact("Seminyak")
print(f"Ğ’Ğ»Ğ¸ÑĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ñ‹: {impact['impact_percent']}%")
```

### Ğ¢ĞµÑÑ‚ API Ğ¿Ñ€Ğ°Ğ·Ğ´Ğ½Ğ¸ĞºĞ¾Ğ²
```python
from api_integrations.holiday_service import HolidayService

holidays = HolidayService("YOUR_CALENDARIFIC_API_KEY")
impact = holidays.get_holiday_impact("2024-08-17")  # Ğ”ĞµĞ½ÑŒ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
print(f"Ğ’Ğ»Ğ¸ÑĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ°Ğ·Ğ´Ğ½Ğ¸ĞºĞ¾Ğ²: {impact['impact_percent']}%")
```

### Ğ¢ĞµÑÑ‚ OpenAI
```python
from api_integrations.ai_explainer import AIExplainer

ai = AIExplainer("YOUR_OPENAI_API_KEY")
test_data = {
    'restaurant_name': 'Test Restaurant',
    'sales_difference_percent': 15.0
}
result = ai.generate_sales_analysis(test_data)
print(f"AI Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ: {result['explanation'][:100]}...")
```

---

## ğŸ“Š ĞœĞĞĞ˜Ğ¢ĞĞ Ğ˜ĞĞ“ Ğ˜ Ğ›Ğ˜ĞœĞ˜Ğ¢Ğ«

### OpenWeatherMap
- **Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½**: 1000 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²/Ğ´ĞµĞ½ÑŒ
- **Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ**: ĞšÑÑˆĞ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ½Ğ° 10-15 Ğ¼Ğ¸Ğ½ÑƒÑ‚
- **ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³**: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞ¹Ñ‚Ğµ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº `X-RateLimit-Remaining`

### Calendarific
- **Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½**: 1000 Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²/Ğ¼ĞµÑÑÑ†
- **Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ**: ĞšÑÑˆĞ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ¿Ñ€Ğ°Ğ·Ğ´Ğ½Ğ¸ĞºĞ¸ Ğ½Ğ° Ğ¼ĞµÑÑÑ†
- **ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³**: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞ¹Ñ‚Ğµ Ğ¿Ğ¾Ğ»Ğµ `quota_remaining`

### OpenAI
- **Ğ›Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹**: ĞŸĞ¾ Ñ‚Ğ¾ĞºĞµĞ½Ğ°Ğ¼, ~$0.03 Ğ·Ğ° 1K Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² GPT-4
- **Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ**: ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- **ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³**: ĞÑ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ¹Ñ‚Ğµ `usage.total_tokens`

---

## âš¡ ĞĞŸĞ¢Ğ˜ĞœĞ˜Ğ—ĞĞ¦Ğ˜Ğ¯ ĞŸĞ ĞĞ˜Ğ—Ğ’ĞĞ”Ğ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞĞ¡Ğ¢Ğ˜

### 1. ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
```python
import redis
from datetime import timedelta

# ĞšÑÑˆ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ñ‹ (15 Ğ¼Ğ¸Ğ½ÑƒÑ‚)
redis_client = redis.Redis(host='localhost', port=6379, db=0)

def get_cached_weather(region):
    key = f"weather:{region}"
    cached = redis_client.get(key)
    if cached:
        return json.loads(cached)
    
    # ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
    data = weather_service.get_weather_impact(region)
    redis_client.setex(key, timedelta(minutes=15), json.dumps(data))
    return data
```

### 2. ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
```python
import asyncio
import aiohttp

async def fetch_all_data_async(restaurant_id, date):
    async with aiohttp.ClientSession() as session:
        # ĞŸĞ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğº API
        tasks = [
            fetch_weather_async(session, region),
            fetch_holidays_async(session, date),
            fetch_db_data_async(session, restaurant_id, date)
        ]
        return await asyncio.gather(*tasks)
```

### 3. Ğ‘Ğ°Ñ‚Ñ‡ĞµĞ²Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
```python
def analyze_multiple_restaurants(restaurant_ids, date):
    # Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¿Ğ¾ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğ°Ğ¼ Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ API Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
    regions = {}
    for r_id in restaurant_ids:
        info = db.get_restaurant_info(r_id)
        if info['region'] not in regions:
            regions[info['region']] = []
        regions[info['region']].append(r_id)
    
    # ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğ°Ğ¼
    weather_data = {}
    for region in regions.keys():
        weather_data[region] = weather_service.get_weather_impact(region)
    
    # ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµĞ¼ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€ĞµÑÑ‚Ğ¾Ñ€Ğ°Ğ½
    results = {}
    for r_id in restaurant_ids:
        info = db.get_restaurant_info(r_id)
        results[r_id] = analyze_with_cached_data(
            r_id, date, weather_data[info['region']]
        )
    
    return results
```

---

## ğŸ”’ Ğ‘Ğ•Ğ—ĞĞŸĞĞ¡ĞĞĞ¡Ğ¢Ğ¬ Ğ˜ Ğ›Ğ£Ğ§Ğ¨Ğ˜Ğ• ĞŸĞ ĞĞšĞ¢Ğ˜ĞšĞ˜

### 1. Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ĞºĞ»ÑÑ‡ĞµĞ¹
```bash
# Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
export OPENWEATHER_API_KEY="your_key_here"
export CALENDARIFIC_API_KEY="your_key_here"
export OPENAI_API_KEY="your_key_here"
```

```python
import os
from dotenv import load_dotenv

load_dotenv()

config = {
    'weather_api_key': os.getenv('OPENWEATHER_API_KEY'),
    'holiday_api_key': os.getenv('CALENDARIFIC_API_KEY'),
    'openai_api_key': os.getenv('OPENAI_API_KEY')
}
```

### 2. ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
```python
def safe_api_call(func, *args, **kwargs):
    max_retries = 3
    for attempt in range(max_retries):
        try:
            return func(*args, **kwargs)
        except requests.exceptions.RequestException as e:
            if attempt == max_retries - 1:
                logger.error(f"API call failed after {max_retries} attempts: {e}")
                return None
            time.sleep(2 ** attempt)  # Ğ­ĞºÑĞ¿Ğ¾Ğ½ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ°
```

### 3. Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
```python
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('api_integrations.log'),
        logging.StreamHandler()
    ]
)
```

---

## ğŸš¨ TROUBLESHOOTING

### Ğ§Ğ°ÑÑ‚Ñ‹Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ¸ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ

#### 1. "Invalid API key"
**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ ĞºĞ»ÑÑ‡Ğ° Ğ¸ ĞµĞ³Ğ¾ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ

#### 2. "Rate limit exceeded"
**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ¸ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°Ğ¼Ğ¸ Ğ¸Ğ»Ğ¸ ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ÑŒÑ‚Ğµ Ğ¿Ğ»Ğ°Ğ½

#### 3. "Connection timeout"
**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡ÑŒÑ‚Ğµ timeout Ğ² Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°Ñ…
```python
response = requests.get(url, timeout=30)
```

#### 4. "Database connection failed"
**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ Ğ±Ğ°Ğ·Ñ‹

#### 5. "OpenAI quota exceeded"
**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ° Ğ¸ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹

### Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼
```python
def diagnose_system():
    print("ğŸ” Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹...")
    
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚-ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ
    try:
        requests.get("https://google.com", timeout=5)
        print("âœ… Ğ˜Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚-ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ: OK")
    except:
        print("âŒ Ğ˜Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚-ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ: FAILED")
    
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ API
    integrator = MasterIntegrator(config)
    health = integrator.get_system_health()
    
    for service, status in health['services'].items():
        if status['status'] == 'healthy':
            print(f"âœ… {service}: OK")
        else:
            print(f"âŒ {service}: {status.get('error', 'FAILED')}")
```

---

## ğŸ’¡ Ğ Ğ•ĞšĞĞœĞ•ĞĞ”ĞĞ¦Ğ˜Ğ˜ ĞŸĞ Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞĞ˜Ğ®

### 1. Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹
- **ĞŸĞ¾Ğ³Ğ¾Ğ´Ğ°**: ĞšĞ°Ğ¶Ğ´Ñ‹Ğµ 15-30 Ğ¼Ğ¸Ğ½ÑƒÑ‚
- **ĞŸÑ€Ğ°Ğ·Ğ´Ğ½Ğ¸ĞºĞ¸**: Ğ Ğ°Ğ· Ğ² Ğ´ĞµĞ½ÑŒ
- **AI Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·**: ĞŸĞ¾ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- **Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…**: Ğ’ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸

### 2. ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
```json
{
  "cache_settings": {
    "weather_cache_minutes": 15,
    "holiday_cache_hours": 24,
    "ai_cache_minutes": 5
  },
  "retry_settings": {
    "max_retries": 3,
    "retry_delay": 2,
    "timeout_seconds": 30
  },
  "batch_settings": {
    "max_batch_size": 50,
    "concurrent_requests": 5
  }
}
```

### 3. ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ·Ğ°Ñ‚Ñ€Ğ°Ñ‚
```python
def track_api_costs():
    costs = {
        'openweather': 0.0,
        'calendarific': 0.0,
        'openai': 0.0
    }
    
    # ĞÑ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
    request_counts = {
        'openweather': 0,
        'calendarific': 0,
        'openai_tokens': 0
    }
    
    return costs, request_counts
```

---

## ğŸ¯ Ğ“ĞĞ¢ĞĞ’Ğ«Ğ• Ğ¡Ğ¦Ğ•ĞĞĞ Ğ˜Ğ˜ Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞĞ˜Ğ¯

### Ğ•Ğ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·
```python
def daily_analysis():
    today = datetime.now().strftime('%Y-%m-%d')
    restaurants = db.get_all_restaurants()
    
    for restaurant in restaurants:
        analysis = integrator.analyze_restaurant_performance(
            restaurant['id'], today
        )
        
        # ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ¾Ñ‚Ñ‡ĞµÑ‚Ğ° Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ñƒ
        send_daily_report(restaurant, analysis)
```

### ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
```python
def critical_monitoring():
    restaurants = db.get_all_restaurants()
    
    for restaurant in restaurants:
        alert = integrator.monitor_critical_changes(
            restaurant['id'], threshold=20.0
        )
        
        if alert:
            send_alert_notification(alert)
```

### Ğ•Ğ¶ĞµĞ½ĞµĞ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¾Ñ‚Ñ‡ĞµÑ‚Ñ‹
```python
def weekly_reports():
    restaurants = db.get_all_restaurants()
    
    for restaurant in restaurants:
        report = integrator.generate_weekly_report(
            restaurant['id'], weeks=4
        )
        
        send_weekly_report(restaurant, report)
```

---

## ğŸ“ˆ ĞœĞĞ¡Ğ¨Ğ¢ĞĞ‘Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ•

### Ğ”Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… Ğ¾Ğ±ÑŠĞµĞ¼Ğ¾Ğ² Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
1. **Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡** (Celery, RQ)
2. **ĞšÑÑˆĞ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹** (Redis, Memcached)
3. **Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚Ğµ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºÑƒ** (Load balancer)
4. **ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€ÑŒÑ‚Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ** (Prometheus, Grafana)

### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğ°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Load Balancer â”‚    â”‚   API Gateway   â”‚    â”‚   Auth Service  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Master Integrator     â”‚
                    â”‚   (Main Application)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                            â”‚                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Weather API   â”‚    â”‚   Holiday API   â”‚    â”‚   OpenAI API    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Client Database       â”‚
                    â”‚   (PostgreSQL/MySQL)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Ğ§Ğ•ĞšĞ›Ğ˜Ğ¡Ğ¢ Ğ“ĞĞ¢ĞĞ’ĞĞĞ¡Ğ¢Ğ˜

- [ ] ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ñ‹ Ğ²ÑĞµ API ĞºĞ»ÑÑ‡Ğ¸
- [ ] ĞĞ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
- [ ] Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ñ‹ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
- [ ] ĞŸÑ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ğ²ÑĞµ API
- [ ] ĞĞ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¾ ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- [ ] ĞĞ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
- [ ] ĞŸÑ€Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¾ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·Ğ¾Ñ‡Ğ½Ğ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- [ ] ĞĞ°ÑÑ‚Ñ€Ğ¾ĞµĞ½ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³
- [ ] ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ»ĞµĞ½Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

**ĞŸĞ¾ÑĞ»Ğµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ Ğ²ÑĞµÑ… Ğ¿ÑƒĞ½ĞºÑ‚Ğ¾Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ° Ğº Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ñƒ! ğŸš€**