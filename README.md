# 🎯 MUZAQUEST ANALYTICS - СИСТЕМА ПОЛНОГО АНАЛИЗА + API

## 🚀 КОМПЛЕКСНАЯ АНАЛИТИКА С ИСПОЛЬЗОВАНИЕМ ВСЕХ ПАРАМЕТРОВ + API

**Профессиональная система аналитики ресторанов** с полным использованием **всех 63 параметров** из баз данных Grab и Gojek + **интеграция 3 внешних API**.

### ✅ ПОЛНОЕ ПОКРЫТИЕ ДАННЫХ + API

🔬 **ВСЕ 30 ПАРАМЕТРОВ GRAB** + **ВСЕ 33 ПАРАМЕТРА GOJEK** = **63 ПОЛЯ**

🌐 **3 API ИНТЕГРАЦИИ:**
- 🤖 **OpenAI API** - AI-анализ и умные рекомендации
- 🌤️ **Weather API** - влияние погоды на продажи
- 📅 **Calendar API** - анализ праздников и особых дней

📊 **8 НАПРАВЛЕНИЙ АНАЛИЗА:**
1. 📈 Базовая аналитика (продажи, заказы, ROAS)
2. 👥 Клиентская база (новые/повторные/реактивированные)
3. 🎯 Маркетинговая воронка (CTR, конверсии, показы)
4. ⚠️ Операционные проблемы (статусы магазина)
5. ⭐ Качество обслуживания (детальные рейтинги 1-5★)
6. ⏱️ Время обслуживания (принятие/приготовление/доставка)
7. 🌐 Внешние факторы (погода + праздники) **NEW!**
8. 🤖 AI-анализ и рекомендации **NEW!**

## 🛠️ БЫСТРЫЙ СТАРТ

### Установка зависимостей:
```bash
pip install -r requirements.txt
```

### 🔑 Настройка API (опционально):
```bash
# Скопируйте файл примера
cp .env.example .env

# Отредактируйте .env и добавьте ваши API ключи:
# OPENAI_API_KEY=your_openai_api_key_here
# WEATHER_API_KEY=your_openweathermap_api_key_here  
# CALENDAR_API_KEY=your_calendarific_api_key_here
```

**💡 Система работает и БЕЗ API ключей** - используются улучшенные симуляции!

### 📋 Основные команды:

```bash
# 📋 Список всех ресторанов
python main.py list

# 🔬 Полный анализ с использованием всех 63 параметров + API
python main.py analyze "Ika Canggu"

# 📅 Анализ за определенный период
python main.py analyze "Ika Canggu" --start 2025-04-01 --end 2025-06-22

# 🌍 Анализ всего рынка
python main.py market

# 🌐 Проверка статуса API
python main.py check-apis
```

## 📊 ПРИМЕРЫ АНАЛИЗА

### 🔬 Анализ ресторана "Ika Canggu" с API:
```
📊 БАЗОВАЯ АНАЛИТИКА:
💰 Общие продажи: 232,343,700 IDR
📦 Общие заказы: 576
🎯 ROAS: 23.06x

👥 КЛИЕНТСКАЯ БАЗА:
👥 Общие клиенты: 421
🆕 Новые: 207 (49.2%)
🔄 Повторные: 194 (46.1%)

📈 МАРКЕТИНГОВАЯ ВОРОНКА:
👁️ Показы: 41,112
🔗 CTR: 4.64%
✅ Конверсии: 13.48%

🌐 ВНЕШНИЕ ФАКТОРЫ (API):
🌤️ Анализ погоды:
  2025-06-01: ☀️ Clear, 27.8°C → 12,221,600 IDR
  2025-06-02: ☁️ Clouds, 31.2°C → 9,731,900 IDR

📅 Анализ праздников:
  🎯 Влияние праздников: -2.2%

🤖 AI-АНАЛИЗ И РЕКОМЕНДАЦИИ:
[Автоматические умные рекомендации от GPT-4]
```

## 🌐 API ИНТЕГРАЦИИ

### 🤖 **OpenAI API (GPT-4)**
- **Функция**: AI-анализ данных и генерация умных рекомендаций
- **Получить ключ**: https://platform.openai.com/api-keys
- **Стоимость**: ~$10-30/месяц (зависит от использования)
- **Без ключа**: Используется автоматический анализ

### 🌤️ **Weather API (OpenWeatherMap)**
- **Функция**: Анализ влияния погоды на продажи
- **Получить ключ**: https://openweathermap.org/api
- **Стоимость**: ~$5-10/месяц (исторические данные)
- **Без ключа**: Используется симуляция погоды

### 📅 **Calendar API (Calendarific)**
- **Функция**: Анализ влияния праздников на бизнес
- **Получить ключ**: https://calendarific.com/
- **Стоимость**: Бесплатно (до 1000 запросов/месяц)
- **Без ключа**: Используется локальная база праздников

## 🗃️ СТРУКТУРА БАЗЫ ДАННЫХ

### 📊 GRAB_STATS (30 полей):
- Продажи, заказы, рейтинги
- Рекламные кампании (затраты, CTR, показы)
- Клиентская база (новые/повторные/реактивированные)
- Операционные проблемы (закрыт/занят/нет товара)
- Финансовые данные

### 📊 GOJEK_STATS (33 поля):
- Основные метрики + уникальные для Gojek
- Времена обслуживания (принятие/приготовление/доставка)
- Детальные рейтинги (1-5 звезд)
- Логистические данные
- Операционная эффективность

## 🎯 ВОЗМОЖНОСТИ СИСТЕМЫ

### 🔍 ML-АНАЛИЗ И ВЫЯВЛЕНИЕ:
- 📊 **Аномалии в данных** (резкие изменения)
- 📈 **Тренды и закономерности** (сезонность, циклы)
- 🎯 **Причины падения продаж** (реклама, погода, праздники)
- ⏱️ **Влияние времени готовки** на рейтинги
- 👥 **Изменения в поведении клиентов**

### 🌐 АНАЛИЗ ВНЕШНИХ ФАКТОРОВ:
- 🌧️ **Влияние погоды** на продажи (дождь, температура)
- 🎉 **Влияние праздников** на заказы и выручку
- 📅 **Сезонные паттерны** и календарные эффекты
- 🕌 **Религиозные праздники** (Рамадан, Ид и др.)

### 🤖 AI-POWERED ИНСАЙТЫ:
- 💡 **Автоматическая генерация** рекомендаций
- 📊 **Экспертный анализ** данных с помощью GPT-4
- 🎯 **Персонализированные советы** для каждого ресторана
- 📈 **Прогнозы и стратегии** развития

### 📅 СРАВНИТЕЛЬНАЯ АНАЛИТИКА:
- Квартал к кварталу
- Год к году
- Периоды до/после изменений
- Сравнение с конкурентами

## 📁 СТРУКТУРА ПРОЕКТА

```
muzaquest-analytics/
├── main.py                           # 🚀 Основной CLI (ВСЕ 63 параметра + API)
├── database.sqlite                   # 📊 База данных (4MB, 24K записей)
├── requirements.txt                  # 📦 Зависимости Python
├── .env.example                      # 🔑 Пример настройки API ключей
├── data/                            # 📁 Данные
│   ├── database.sqlite              # 💾 Рабочая БД
│   └── README.md                    # 📋 Описание данных
├── reports/                         # 📄 Автоматические отчеты с API
├── COMPLETE_ANALYSIS_PARAMETERS.md  # ✅ Документация всех параметров
└── README.md                        # 📖 Этот файл
```

## 🔧 ТЕХНИЧЕСКИЕ ДЕТАЛИ

### 📚 Зависимости:
- **Python 3.x**
- **pandas** - обработка данных
- **numpy** - численные вычисления
- **requests** - HTTP запросы к API
- **python-dotenv** - работа с .env файлами
- **openai** - интеграция с OpenAI GPT
- **sqlite3** - работа с БД
- **argparse** - CLI интерфейс

### 💾 Автоматическое сохранение:
- Все отчеты → `reports/`
- Детальная аналитика по всем 63 параметрам
- AI-инсайты и рекомендации
- Данные погоды и праздников
- Временные метки для версионности

### 🔐 Защита данных:
- Только чтение БД (read-only режим)
- Безопасные API запросы с таймаутами
- .env файл в .gitignore (API ключи защищены)
- Проверка входных параметров

## 📊 ДОСТУПНЫЕ ДАННЫЕ

### 🏪 Рестораны: **59 активных**
### 📅 Период: **2023-01-01 → 2025-06-22**
### 📈 Записей: **24,356**
### 🗂️ Параметров: **63 поля + 3 API**

### 🏆 ТОП-3 по продажам:
1. **Prana** - 7.26T IDR
2. **Ika Kero** - 6.74T IDR  
3. **Ika Canggu** - 4.50T IDR

## ✅ ГОТОВНОСТЬ СИСТЕМЫ

✅ **ВСЕ 63 ПАРАМЕТРА** используются в анализе  
✅ **3 API ИНТЕГРАЦИИ** (OpenAI + Weather + Calendar)  
✅ **ML-алгоритмы** для выявления аномалий  
✅ **Комплексная аналитика** по 8 направлениям  
✅ **AI-рекомендации** на основе GPT-4  
✅ **Анализ внешних факторов** (погода + праздники)  
✅ **Интеграция платформ** Grab + Gojek  
✅ **Сравнительная аналитика** по периодам  
✅ **Чистый репозиторий** без лишних файлов  

## 🆘 ПОДДЕРЖКА

Для получения помощи:
```bash
python main.py --help
python main.py check-apis  # Проверка статуса API
```

Детальная документация всех параметров: `COMPLETE_ANALYSIS_PARAMETERS.md`

### 🔑 Быстрая настройка API:
```bash
# 1. Скопируйте пример
cp .env.example .env

# 2. Отредактируйте .env файл
nano .env

# 3. Проверьте статус
python main.py check-apis
```

---

**🎯 MUZAQUEST ANALYTICS** - профессиональная система для глубокого анализа ресторанного бизнеса с использованием всех доступных данных, современных ML-технологий и AI-рекомендаций.