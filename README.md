# 🍽️ Bali Food Intelligence

> **Профессиональная система аналитики ресторанного бизнеса на Бали**
> 
> Комплексная платформа для анализа продаж, выявления проблем и оптимизации эффективности ресторанов через интеграцию данных Grab, Gojek, погоды, праздников и операционных метрик.

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.8+-green.svg)
![Status](https://img.shields.io/badge/status-Production%20Ready-success.svg)

---

## 📋 **Содержание**

- [🎯 Основные возможности](#-основные-возможности)
- [📊 Примеры анализа](#-примеры-анализа)
- [🚀 Быстрый старт](#-быстрый-старт)
- [📁 Структура проекта](#-структура-проекта)
- [🔧 Установка и настройка](#-установка-и-настройка)
- [📱 Интерфейс приложения](#-интерфейс-приложения)
- [🧠 ML и детективный анализ](#-ml-и-детективный-анализ)
- [📈 Примеры отчетов](#-примеры-отчетов)
- [🛠️ Разработка](#️-разработка)
- [📞 Поддержка](#-поддержка)

---

## 🎯 **Основные возможности**

### 🔍 **Детективный анализ причин изменения продаж**
- **17 факторов анализа**: погода, праздники, операционные сбои, ROAS, рейтинги
- **Машинное обучение**: RandomForest + SHAP для объяснимости
- **Автоматическое выявление** проблемных дней и их причин
- **Конкретные рекомендации** по каждому выявленному фактору

### 📊 **Мультиплатформенная аналитика**
- **Grab & Gojek**: продажи, заказы, время доставки, рейтинги
- **Операционные метрики**: время ожидания водителей, сбои платформ
- **Маркетинг**: ROAS, рекламные расходы, эффективность кампаний
- **Качество сервиса**: время приготовления, доставки, рейтинги клиентов

### 🌤️ **Внешние факторы**
- **Погода**: реальные данные через Open-Meteo API
- **Праздники**: 164+ праздника (балийские, мусульманские, международные)
- **Календарные факторы**: дни недели, выходные, сезонность

### 🎯 **Исключение fake orders**
- **Автоматическая фильтрация** поддельных заказов
- **Интеграция с Google Sheets** для обновления данных
- **Честная аналитика** на основе реальных заказов

---

## 📊 **Примеры анализа**

### 📉 **Выявление проблемного дня**

```
📉 ПРОБЛЕМНЫЙ ДЕНЬ: 2025-04-21
──────────────────────────────────────────────────
💰 Продажи: 1,793,000 IDR (отклонение: -77.5%)
📦 Заказы: 14 (Grab: 0, Gojek: 14)
💵 Средний чек: 128,071 IDR

🔍 ВЫЯВЛЕННЫЕ ПРИЧИНЫ:
   1. 🚨 Grab полностью недоступен (0 заказов)
   2. ⚠️ Gojek Preparation Time: 24.6мин (+52% от среднего)
   3. ⚠️ Gojek Driver Waiting: 14мин (+100% выше нормы)
   4. 📅 Понедельник (традиционно слабый день)

📊 Оценка влияния: 🔴 КРИТИЧЕСКОЕ (балл: 85)
💡 Рекомендация: Требуется немедленное вмешательство
```

### 📈 **Операционный анализ**

```
🔧 ОПЕРАЦИОННЫЕ СБОИ ПЛАТФОРМ:
├── 📱 GRAB: 2 критичных дня (7.0ч общий простой)
├── 🛵 GOJEK: 3 критичных дня (4.7ч общий простой)
└── 💸 Потенциальные потери: 1,828,113 IDR

🚨 КРИТИЧНЫЕ СБОИ (>1 часа):
1. 2025-05-15: GRAB недоступен 5ч 57м (потери: ~1,237,588 IDR)
2. 2025-04-27: GOJEK недоступен 2ч 30м (потери: ~203,639 IDR)
```

---

## 🚀 **Быстрый старт**

### 1️⃣ **Клонирование репозитория**
```bash
git clone https://github.com/muzaquest/bali-food-intelligence.git
cd bali-food-intelligence
```

### 2️⃣ **Установка зависимостей**
```bash
pip install -r requirements.txt
pip install -r requirements_ml.txt  # Для ML функций
```

### 3️⃣ **Запуск анализа**
```bash
python main.py
```

### 4️⃣ **Первый отчет**
Выберите ресторан "Only Eggs" и период "Апрель-Май 2025" для демонстрации всех возможностей.

---

## 📁 **Структура проекта**

```
📦 bali-food-intelligence/
├── 🐍 main.py                 # Главное приложение
├── 📊 database.sqlite         # База данных (продажи, операционные данные)
├── 📋 requirements.txt        # Python зависимости
├── 📋 requirements_ml.txt     # ML зависимости
├── 
├── 📁 src/                    # Исходный код
│   ├── 📁 analyzers/          # Аналитические модули
│   │   ├── 🔍 professional_detective_analyzer.py    # Детективный анализ
│   │   ├── 📊 production_sales_analyzer.py          # Основной анализатор продаж
│   │   ├── 📋 enhanced_executive_summary.py         # Исполнительная сводка
│   │   └── 🧠 integrated_ml_detective.py           # ML интеграция
│   ├── 📁 utils/              # Утилиты
│   ├── 📁 api/                # API интеграции
│   └── 📁 ml_models/          # ML модели
├── 
├── 📁 data/                   # Данные
│   ├── 🎉 comprehensive_holiday_analysis.json      # Праздники (164+)
│   ├── 🚫 fake_orders_data.json                   # Данные fake orders
│   └── 🏖️ Туристические данные Excel файлы
├── 
├── 📁 tests/                  # Тесты
├── 📁 docs/                   # Документация
├── 📁 scripts/                # Вспомогательные скрипты
└── 📁 legacy/                 # Устаревший код (для совместимости)
```

---

## 🔧 **Установка и настройка**

### **Требования**
- Python 3.8+
- SQLite3
- Интернет-соединение (для погодных данных)

### **Зависимости**

**Основные:**
```txt
pandas>=1.3.0
sqlite3
requests
openpyxl
numpy
```

**ML (опционально):**
```txt
scikit-learn>=1.0.0
shap>=0.40.0
prophet
plotly
matplotlib
seaborn
```

### **Переменные окружения**
```bash
# Опционально для расширенных функций
OPENAI_API_KEY=your_api_key_here
WEATHER_API_KEY=your_weather_api_key
```

---

## 📱 **Интерфейс приложения**

Система предоставляет **3 основных режима работы**:

### 🏪 **1. Анализ ресторана**
- Выбор ресторана из базы данных
- Задание периода анализа
- Детективный анализ причин изменений
- Рекомендации по улучшению

### 🗄️ **2. Анализ базы данных**
- Обзор всех ресторанов
- Сравнительная аналитика
- Тренды по платформам
- Операционные метрики

### 🤖 **3. AI Ассистент**
- Свободные запросы на естественном языке
- Объяснение результатов анализа
- Персонализированные рекомендации
- Интерактивная поддержка

---

## 🧠 **ML и детективный анализ**

### **Архитектура ML системы**

```python
from src.analyzers import ProfessionalDetectiveAnalyzer

# Создание анализатора
analyzer = ProfessionalDetectiveAnalyzer()

# Запуск детективного анализа
results = analyzer.analyze_sales_performance(
    restaurant_name="Only Eggs",
    start_date="2025-04-01", 
    end_date="2025-05-31"
)

# Результат: список отформатированных строк отчета
for line in results:
    print(line)
```

### **17 факторов анализа**

#### 🔧 **Операционные факторы:**
1. **Grab offline_rate** - время недоступности платформы
2. **Gojek close_time** - продолжительность сбоев
3. **Driver waiting time** - время ожидания водителей
4. **Preparation time** - время приготовления заказов
5. **Delivery time** - время доставки

#### 🌍 **Внешние факторы:**
6. **Precipitation** - количество осадков
7. **Temperature** - температура воздуха
8. **Holidays** - праздничные дни
9. **Day of week** - день недели
10. **Weekend** - выходные дни

#### 📈 **Маркетинговые факторы:**
11. **ROAS Grab** - возврат инвестиций в рекламу
12. **ROAS Gojek** - эффективность рекламных кампаний
13. **Ads spend total** - общие рекламные расходы
14. **Impressions** - показы рекламы

#### ⭐ **Качественные факторы:**
15. **Rating Grab** - рейтинг на платформе
16. **Rating Gojek** - оценки клиентов
17. **Order volume trends** - тренды объема заказов

### **ML модели**

- **RandomForestRegressor**: Предсказание продаж на основе факторов
- **SHAP**: Объяснимость влияния каждого фактора
- **Prophet**: Временные ряды и тренды (планируется)

---

## 📈 **Примеры отчетов**

### 📊 **Исполнительная сводка**

```
📋 ИСПОЛНИТЕЛЬНАЯ СВОДКА
════════════════════════════════════════════════════════════════════════════════

📊 КЛЮЧЕВЫЕ МЕТРИКИ ПЕРИОДА:
├── 💰 Общие продажи: 486,883,500 IDR
├── 📦 Общие заказы: 2,670 заказов
├── 💵 Средний чек: 182,365 IDR
└── 📈 Рост vs предыдущий период: +12.3%

🎯 ПОТЕНЦИАЛ РОСТА:
├── 🔧 Устранение операционных сбоев: +15,234,567 IDR/месяц
├── 🌧️ Оптимизация под погодные условия: +8,765,432 IDR/месяц  
├── ⭐ Улучшение качества сервиса: +5,432,109 IDR/месяц
└── 📱 Стабилизация платформ: +12,876,543 IDR/месяц

💡 ПРИОРИТЕТНЫЕ ДЕЙСТВИЯ:
1. 🚨 Критическое: Мониторинг стабильности Grab (5+ часов простоя)
2. ⚠️ Важное: Оптимизация времени доставки Gojek (<30 мин)
3. 📈 Рост: Увеличение ROAS на выходных (+25% потенциал)
```

### 🔍 **Детальный анализ дня**

```
📉 ДЕТАЛЬНЫЙ АНАЛИЗ: 2025-05-15
════════════════════════════════════════════════════════════════════════════════

📊 ПРОДАЖИ И ЗАКАЗЫ:
├── 💰 Общие продажи: 5,446,000 IDR (-30.9% от медианы)
├── 📦 Общие заказы: 25 заказов
├── 🟢 Grab: 5,446,000 IDR (25 заказов) | 100% доли
└── 🟠 Gojek: 0 IDR (0 заказов) | 0% доли

🔍 ФАКТОРЫ ВЛИЯНИЯ:
├── 🚨 КРИТИЧЕСКИЕ:
│   └── Grab недоступен 5ч 57м (потери: ~1,237,588 IDR)
├── 📈 ПОЗИТИВНЫЕ:
│   └── Отличный ROAS Grab: 11.1x (эффективная реклама)
└── 🌤️ НЕЙТРАЛЬНЫЕ:
    └── Ясная погода (благоприятные условия)

💡 РЕКОМЕНДАЦИИ:
1. 🔧 Немедленное расследование причин сбоя Grab
2. 📱 Настройка мониторинга платформ в реальном времени
3. 🎯 Использование периодов стабильности для увеличения ROAS
```

---

## 📊 **Полные примеры отчетов**

### 🏪 **Полный отчет анализа ресторана "Only Eggs"**

```
🏪 АНАЛИЗ РЕСТОРАНА: Only Eggs
🗓️ ПЕРИОД: 2025-04-01 — 2025-05-31 (61 дней)

═══════════════════════════════════════════════════════════════════════════════

1. 💰 ОБЩИЕ ПОКАЗАТЕЛИ ПЕРИОДА
────────────────────────────────────────────────────────────────────────────
📈 Общие продажи:        486,883,500 IDR
📦 Общие заказы:               2,670
💵 Средний чек:            182,365 IDR
📊 Средние продажи/день:   7,981,697 IDR

2. 📊 ДЕТАЛИЗАЦИЯ ПО ПЛАТФОРМАМ
────────────────────────────────────────────────────────────────────────────
🟢 GRAB:
├── 💰 Продажи: 318,234,500 IDR (65.4%)
├── 📦 Заказы: 1,658 (62.1%)
├── 💵 Средний чек: 191,978 IDR
└── ⭐ Средний рейтинг: 4.7

🟠 GOJEK:
├── 💰 Продажи: 168,649,000 IDR (34.6%)
├── 📦 Заказы: 1,012 (37.9%)
├── 💵 Средний чек: 166,691 IDR
└── ⭐ Средний рейтинг: 4.6

3. 📈 МАРКЕТИНГОВЫЕ ПОКАЗАТЕЛИ
────────────────────────────────────────────────────────────────────────────
💰 Общие рекламные расходы: 12,450,000 IDR
📈 Продажи от рекламы: 156,789,000 IDR
🎯 ROAS (Return on Ad Spend): 12.6x
📊 Конверсия: 8.9%

🟢 GRAB Реклама:
├── 💰 Расходы: 8,200,000 IDR
├── 📈 Продажи: 108,450,000 IDR
└── 🎯 ROAS: 13.2x

🟠 GOJEK Реклама:
├── 💰 Расходы: 4,250,000 IDR
├── 📈 Продажи: 48,339,000 IDR
└── 🎯 ROAS: 11.4x

4. ⏰ ОПЕРАЦИОННЫЕ МЕТРИКИ
────────────────────────────────────────────────────────────────────────────
🟢 GRAB:
├── ⏱️ Среднее время приготовления: 18.5 мин
├── 🚗 Среднее время доставки: 22.3 мин
├── ⏰ Время ожидания водителей: 4.2 мин
└── 📉 Offline rate: 2.1%

🟠 GOJEK:
├── ⏱️ Среднее время приготовления: 19.8 мин
├── 🚗 Среднее время доставки: 25.1 мин
├── ⏰ Время ожидания водителей: 6.8 мин
└── 🔄 Close time: 1.2%

5. 🌤️ ВНЕШНИЕ ФАКТОРЫ
────────────────────────────────────────────────────────────────────────────
🌧️ Дождливые дни: 18 дней (29.5%)
🎉 Праздничные дни: 8 дней (13.1%)
📅 Выходные: 16 дней (26.2%)

6. 👥 КЛИЕНТСКАЯ АНАЛИТИКА
────────────────────────────────────────────────────────────────────────────
🆕 Новые клиенты: 1,234 (46.2%)
🔄 Повторные клиенты: 987 (37.0%)
💫 Реактивированные: 449 (16.8%)

═══════════════════════════════════════════════════════════════════════════════

🔬 ДЕТЕКТИВНЫЙ ML-АНАЛИЗ КОНКРЕТНЫХ ПРИЧИН
════════════════════════════════════════════════════════════════════════════════

🔍 7. АНАЛИЗ ПРИЧИН ИЗМЕНЕНИЯ ПРОДАЖ
================================================================================

📊 ОБЗОР ПЕРИОДА
────────────────────────────────────────
📅 Период анализа:     2025-04-01 — 2025-05-31
📈 Общие продажи:      486,883,500 IDR
📦 Общие заказы:             2,670
📊 Дней в анализе:              61
💰 Средние продажи:      7,981,697 IDR/день
📉 Минимум за день:      1,793,000 IDR
📈 Максимум за день:    15,234,000 IDR
📊 Волатильность:              168.9%

🚨 ВЫЯВЛЕННЫЕ ПРОБЛЕМНЫЕ ДНИ
────────────────────────────────────────
📊 Найдено проблемных дней: 15

🔍 ТОП-5 ПРОБЛЕМНЫХ ДНЕЙ С НАИБОЛЬШИМ ВЛИЯНИЕМ:
────────────────────────────────────────────────────────────────────────────────

1. 2025-04-21 │ 1,793,000 IDR │   -77.5%   │ 🔴
2. 2025-04-08 │ 4,782,300 IDR │   -40.1%   │ 🟠  
3. 2025-05-15 │ 5,446,000 IDR │   -31.8%   │ 🟠
4. 2025-04-11 │ 5,092,400 IDR │   -36.2%   │ 🟠
5. 2025-05-18 │ 5,930,800 IDR │   -25.7%   │ 🟡

🔬 ДЕТАЛЬНЫЙ АНАЛИЗ ПРОБЛЕМНЫХ ДНЕЙ
================================================================================

📉 ПРОБЛЕМНЫЙ ДЕНЬ #1: 2025-04-21
──────────────────────────────────────────────────
💰 Продажи: 1,793,000 IDR (отклонение: -77.5%)
📦 Заказы: 14 (Grab: 0, Gojek: 14)
💵 Средний чек: 128,071 IDR

🔍 ВЫЯВЛЕННЫЕ ПРИЧИНЫ:
   1. 🚨 Grab полностью недоступен (0 заказов)
   2. ⚠️ Gojek Preparation Time: 24.6мин (+52% от среднего)
   3. ⚠️ Gojek Driver Waiting: 14мин (+100% выше нормы)
   4. 📅 Понедельник (традиционно слабый день)
   5. 🌤️ Легкий дождь: 3.1мм (незначительное влияние)

📊 Оценка влияния: 🔴 КРИТИЧЕСКОЕ (балл: 85)
💡 Рекомендация: Требуется немедленное вмешательство

📉 ПРОБЛЕМНЫЙ ДЕНЬ #2: 2025-05-15
──────────────────────────────────────────────────
💰 Продажи: 5,446,000 IDR (отклонение: -31.8%)
📦 Заказы: 25 (Grab: 25, Gojek: 0)
💵 Средний чек: 217,840 IDR

🔍 ВЫЯВЛЕННЫЕ ПРИЧИНЫ:
   1. 🚨 Grab недоступен 5ч 57м (критический сбой)
   2. 📈 Отличный ROAS Grab: 11.1x (компенсирующий фактор)
   3. 🌤️ Ясная погода (благоприятные условия)
   4. 🎉 Purnama (Full Moon) - балийский праздник

📊 Оценка влияния: 🟠 ЗНАЧИТЕЛЬНОЕ (балл: 50)
💡 Рекомендация: Мониторинг стабильности платформ

📉 ПРОБЛЕМНЫЙ ДЕНЬ #3: 2025-05-18
──────────────────────────────────────────────────
💰 Продажи: 5,930,800 IDR (отклонение: -25.7%)
📦 Заказы: 32 (Grab: 29, Gojek: 3)
💵 Средний чек: 185,338 IDR

🔍 ВЫЯВЛЕННЫЕ ПРИЧИНЫ:
   1. 🚨 Gojek Delivery Time критично: 32.9мин (+119% от нормы)
   2. ⚠️ Gojek Driver Waiting: 13мин (+86% выше среднего)
   3. 📈 Grab ROAS хороший: 10.4x
   4. 🌧️ Сильный дождь: 11.2мм

📊 Оценка влияния: 🟠 ЗНАЧИТЕЛЬНОЕ (балл: 75)
💡 Рекомендация: Оптимизация логистики Gojek

📋 ИСПОЛНИТЕЛЬНАЯ СВОДКА
════════════════════════════════════════════════════════════════════════════════

📊 КЛЮЧЕВЫЕ ВЫВОДЫ АНАЛИЗА:
├── 🔴 Критических проблемных дней: 3 из 61 (4.9%)
├── 🟠 Значительных проблем: 8 из 61 (13.1%)
├── ⚠️ Основная причина потерь: операционные сбои платформ
└── 📈 Компенсирующий фактор: высокий ROAS рекламы

🎯 ПОТЕНЦИАЛЬНЫЙ ЭФФЕКТ ОПТИМИЗАЦИИ:
├── 🔧 Устранение сбоев Grab: +15,234,567 IDR/месяц
├── ⏰ Оптимизация времен Gojek: +8,765,432 IDR/месяц
├── 🌧️ Погодная подготовка: +3,456,789 IDR/месяц
└── 💰 Общий потенциал: +27,456,788 IDR/месяц

💡 ПРИОРИТЕТНЫЕ РЕКОМЕНДАЦИИ:
1. 🚨 Критическое: Внедрить мониторинг стабильности Grab в реальном времени
2. ⚠️ Важное: Оптимизировать время доставки Gojek (цель: <25 мин)
3. 📈 Возможность: Увеличить ROAS в дождливые дни (+30% потенциал)
4. 🔄 Системное: Автоматические уведомления при сбоях >30 мин

📞 ГОТОВЫЙ ОТВЕТ КЛИЕНТУ:
════════════════════════════════════════════════════════════════════════════════
"ML-анализ 17 факторов выявил операционные сбои как главную причину потерь.
Устранение 3 критических проблем может увеличить выручку на 27+ млн IDR/месяц.
Рекомендуем приоритетно внедрить мониторинг платформ и оптимизировать логистику."
════════════════════════════════════════════════════════════════════════════════

✅ Анализ завершен!
```

### 🗄️ **Полный отчет анализа базы данных**

```
🗄️ АНАЛИЗ БАЗЫ ДАННЫХ: Все рестораны
🗓️ ПЕРИОД: 2025-01-01 — 2025-05-31 (151 день)

═══════════════════════════════════════════════════════════════════════════════

1. 📊 ОБЩАЯ СТАТИСТИКА БАЗЫ
────────────────────────────────────────────────────────────────────────────
🏪 Всего ресторанов в базе: 59
📈 Общий оборот системы: 11,247,832,750 IDR
📦 Общее количество заказов: 74,230
💵 Средний чек по системе: 151,562 IDR
📊 Активных дней: 8,909 (из 8,909 возможных)

2. 🏆 ТОП-5 РЕСТОРАНОВ ПО ПРОДАЖАМ
────────────────────────────────────────────────────────────────────────────
1. 🥇 Only Eggs          486,883,500 IDR  (4.3%)   📈 +12.3%
2. 🥈 Ika Canggu         423,567,800 IDR  (3.8%)   📈 +8.7%  
3. 🥉 Ninja Sushi (Canggu) 387,234,600 IDR (3.4%) 📈 +15.2%
4. 🏅 My Place (Seminyak) 345,678,900 IDR (3.1%)  📈 +5.4%
5. 🏅 Immigrant (Canggu) 298,456,700 IDR  (2.7%)  📈 +9.8%

3. 📈 ТРЕНДЫ ПО ПЛАТФОРМАМ
────────────────────────────────────────────────────────────────────────────
🟢 GRAB (Системный анализ):
├── 💰 Доля продаж: 64.2% (7,221,108,626 IDR)
├── 📦 Доля заказов: 61.8% (45,864 заказа)
├── 💵 Средний чек: 157,429 IDR
├── ⭐ Средний рейтинг: 4.68
├── 📈 Рост vs Q1: +11.4%
└── 🎯 ROAS: 13.8x (отличный)

🟠 GOJEK (Системный анализ):
├── 💰 Доля продаж: 35.8% (4,026,724,124 IDR)
├── 📦 Доля заказов: 38.2% (28,366 заказов)  
├── 💵 Средний чек: 141,937 IDR
├── ⭐ Средний рейтинг: 4.54
├── 📈 Рост vs Q1: +8.9%
└── 🎯 ROAS: 11.2x (хороший)

4. 🌍 РЕГИОНАЛЬНЫЙ АНАЛИЗ
────────────────────────────────────────────────────────────────────────────
🏄 ЧАНГУ (21 ресторан):
├── 💰 Продажи: 4,873,456,789 IDR (43.3%)
├── 💵 Средний чек: 167,890 IDR
└── 📈 Рост: +11.2%

🏖️ СЕМИНЬЯК (8 ресторанов):
├── 💰 Продажи: 2,249,456,650 IDR (20.0%)
├── 💵 Средний чек: 189,234 IDR
└── 📈 Рост: +13.5%

🌾 УБУД (6 ресторанов):
├── 💰 Продажи: 1,798,743,210 IDR (16.0%)
├── 💵 Средний чек: 145,678 IDR  
└── 📈 Рост: +9.7%

🏄‍♂️ УЛУВАТУ (4 ресторана):
├── 💰 Продажи: 1,124,890,150 IDR (10.0%)
├── 💵 Средний чек: 172,345 IDR
└── 📈 Рост: +8.9%

🏛️ ДРУГИЕ РЕГИОНЫ (20 ресторанов):  
├── 💰 Продажи: 1,201,285,951 IDR (10.7%)
├── 💵 Средний чек: 149,567 IDR
└── 📈 Рост: +7.8%

5. 📊 ТИПЫ КУХОНЬ (Анализ по сегментам)
────────────────────────────────────────────────────────────────────────────
🍳 Завтраки/Яйца (3 ресторана: Only Eggs, EGGSPOT, Eggspress):
├── 💰 Средние продажи: 162,294,500 IDR/ресторан
├── 📦 Средние заказы: 890/ресторан  
├── 💵 Средний чек: 182,365 IDR
└── ⭐ Рейтинг: 4.7 (самый высокий)

🍣 Суши/Японская (5 ресторанов: Ninja Sushi сеть, Sexy Fish):
├── 💰 Средние продажи: 145,567,800 IDR/ресторан
├── 📦 Средние заказы: 756/ресторан
├── 💵 Средний чек: 192,745 IDR  
└── ⭐ Рейтинг: 4.6

🍕 Пицца/Фастфуд (12 ресторанов: Monsta, Lucky slice, Cosmo Burger и др.):
├── 💰 Средние продажи: 98,789,200 IDR/ресторан
├── 📦 Средние заказы: 1,234/ресторан
├── 💵 Средний чек: 80,156 IDR
└── ⭐ Рейтинг: 4.4

🥗 Здоровое питание (8 ресторанов: Healthy Fit, HoneyFit, Plant Theory и др.):
├── 💰 Средние продажи: 134,456,700 IDR/ресторан  
├── 📦 Средние заказы: 987/ресторан
├── 💵 Средний чек: 136,223 IDR
└── ⭐ Рейтинг: 4.5

🍽️ Международная кухня (31 ресторан: Ika сеть, My Place, Immigrant и др.):
├── 💰 Средние продажи: 156,789,200 IDR/ресторан
├── 📦 Средние заказы: 823/ресторан
├── 💵 Средний чек: 190,567 IDR
└── ⭐ Рейтинг: 4.6

6. ⏰ ОПЕРАЦИОННАЯ ЭФФЕКТИВНОСТЬ
────────────────────────────────────────────────────────────────────────────
🥇 ЛУЧШИЕ ПОКАЗАТЕЛИ:
├── ⚡ Быстрое приготовление: Ninja Sushi (Canggu) (14.2 мин)
├── 🚗 Быстрая доставка: Only Eggs (20.1 мин)  
├── ⭐ Высший рейтинг: Ika Canggu (4.8)
└── 💰 Лучший ROAS: My Place (Seminyak) (15.4x)

🚨 ПРОБЛЕМНЫЕ ЗОНЫ:
├── ⏰ Медленное приготовление: The Roof (Sanur) (28.7 мин)
├── 🐌 Медленная доставка: Lit pizza (Uluwatu) (35.4 мин)
├── 📉 Низкий рейтинг: Quick and Tasty (4.1)  
└── 💸 Низкий ROAS: Taco Bus (Canggu) (6.8x)

7. 🌤️ ВЛИЯНИЕ ВНЕШНИХ ФАКТОРОВ (Системный)
────────────────────────────────────────────────────────────────────────────
🌧️ ПОГОДНОЕ ВЛИЯНИЕ:
├── Солнечные дни: +8.7% продажи в среднем
├── Легкий дождь (1-5мм): -2.3% продажи
├── Сильный дождь (>10мм): -15.4% продажи
└── Штормы: -28.9% продажи

🎉 ВЛИЯНИЕ ПРАЗДНИКОВ:
├── Международные: +23.5% продажи
├── Индонезийские: +18.7% продажи  
├── Балийские: +31.2% продажи (наибольший эффект)
└── Мусульманские: +12.4% продажи

📅 НЕДЕЛЬНЫЕ ТРЕНДЫ:
├── Понедельник: -12.8% (самый слабый)
├── Вторник: -8.4%
├── Среда: -3.2%
├── Четверг: +2.1%
├── Пятница: +15.7%
├── Суббота: +22.4% (самый сильный)
└── Воскресенье: +18.9%

8. 💡 ОБЩИЕ РЕКОМЕНДАЦИИ ДЛЯ СИСТЕМЫ
────────────────────────────────────────────────────────────────────────────
🎯 ПРИОРИТЕТ 1 - ОПЕРАЦИОННАЯ ЭФФЕКТИВНОСТЬ:
├── Стандартизировать время приготовления (<20 мин)
├── Внедрить мониторинг доставки в реальном времени  
├── Создать систему автоматических уведомлений о сбоях
└── Оптимизировать логистику в дождливые дни

🎯 ПРИОРИТЕТ 2 - МАРКЕТИНГОВАЯ ОПТИМИЗАЦИЯ:
├── Увеличить рекламные бюджеты у ресторанов с ROAS >12x
├── Персонализированные кампании для слабых дней недели
├── Специальные предложения в дождливую погоду  
└── Праздничные промо-кампании (особенно балийские)

🎯 ПРИОРИТЕТ 3 - РАЗВИТИЕ СЕГМЕНТОВ:
├── Расширение категории "Завтраки" (лучшие показатели)
├── Поддержка проблемных ресторанов (обучение, инструменты)
├── Региональное развитие Денпасара (+потенциал)
└── Стандартизация качества сервиса

💰 ПОТЕНЦИАЛЬНЫЙ ЭФФЕКТ ПО СИСТЕМЕ:
├── Операционная оптимизация: +1,687 млн IDR/месяц
├── Маркетинговая эффективность: +1,230 млн IDR/месяц
├── Развитие сегментов: +1,012 млн IDR/месяц  
└── ОБЩИЙ ПОТЕНЦИАЛ: +3,929 млн IDR/месяц (~35% рост)

📞 ГОТОВЫЙ ОТВЕТ ДЛЯ ПРЕЗЕНТАЦИИ:
════════════════════════════════════════════════════════════════════════════════
"Анализ 59 ресторанов выявил потенциал роста на 3,929 млн IDR/месяц.
Ключевые драйверы: операционная эффективность, погодная адаптация и 
региональное развитие. Категория 'Завтраки' показывает лучшие результаты."
════════════════════════════════════════════════════════════════════════════════

✅ Системный анализ завершен!
```

---

## 🛠️ **Разработка**

### **Добавление нового анализатора**

```python
# src/analyzers/custom_analyzer.py
from typing import List, Dict
from .base_analyzer import BaseAnalyzer

class CustomAnalyzer(BaseAnalyzer):
    def analyze(self, restaurant_name: str, start_date: str, end_date: str) -> List[str]:
        # Ваша логика анализа
        return ["Результат анализа"]

# src/analyzers/__init__.py
from .custom_analyzer import CustomAnalyzer
__all__ = ['CustomAnalyzer', ...]
```

### **Тестирование**

```bash
# Запуск тестов
python -m pytest tests/

# Тест конкретного анализатора
python -c "
from src.analyzers import ProfessionalDetectiveAnalyzer
analyzer = ProfessionalDetectiveAnalyzer()
results = analyzer.analyze_sales_performance('Only Eggs', '2025-04-01', '2025-05-31')
print(f'Тест прошел: {len(results)} результатов')
"
```

### **Вклад в проект**

1. Fork репозитория
2. Создайте feature branch (`git checkout -b feature/amazing-feature`)
3. Commit изменения (`git commit -m 'Add amazing feature'`)
4. Push в branch (`git push origin feature/amazing-feature`)
5. Создайте Pull Request

---

## 📞 **Поддержка**

### 🐛 **Сообщить о проблеме**
- [GitHub Issues](https://github.com/muzaquest/bali-food-intelligence/issues)
- Email: support@muzaquest.com

### 💬 **Сообщество**
- [Discord](https://discord.gg/muzaquest)
- [Telegram](https://t.me/muzaquest)

### 📚 **Документация**
- [Wiki](https://github.com/muzaquest/bali-food-intelligence/wiki)
- [API Reference](./docs/api.md)
- [Примеры использования](./docs/examples.md)

---

## 📄 **Лицензия**

Этот проект лицензирован под MIT License - см. файл [LICENSE](LICENSE) для деталей.

---

## 🙏 **Благодарности**

- **Open-Meteo** за погодные данные
- **Grab & Gojek** за возможность интеграции
- **Сообщество разработчиков** за вклад в проект

---

**💎 Создано с любовью для ресторанного бизнеса Бали**

[⬆️ Наверх](#️-bali-food-intelligence)