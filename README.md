# 🎯 MUZAQUEST ANALYTICS - СИСТЕМА ПОЛНОГО АНАЛИЗА + API

## 🚀 КОМПЛЕКСНАЯ АНАЛИТИКА С ИСПОЛЬЗОВАНИЕМ ВСЕХ ПАРАМЕТРОВ + API

**Профессиональная система аналитики ресторанов** с полным использованием **всех 63 параметров** из баз данных Grab и Gojek + **интеграция 3 внешних API**.

### ✅ ПОЛНОЕ ПОКРЫТИЕ ДАННЫХ + API

🔬 **ВСЕ 30 ПАРАМЕТРОВ GRAB** + **ВСЕ 33 ПАРАМЕТРА GOJEK** = **63 ПОЛЯ**

🌐 **3 API ИНТЕГРАЦИИ:**
- 🤖 **OpenAI API** - AI-анализ и умные рекомендации
- 🌤️ **Weather API** - влияние погоды на продажи
- 📅 **Calendar API** - анализ праздников и особых дней

📊 **10 НАПРАВЛЕНИЙ АНАЛИЗА:**
1. 📈 Исполнительное резюме (ключевые метрики и ROI)
2. 📊 Анализ продаж и трендов (динамика, лучшие/худшие дни)
3. 👥 Детальная клиентская база (новые/повторные/реактивированные)
4. 🎯 Маркетинговая эффективность (полная воронка, ROAS)
5. ⚠️ Операционная эффективность (проблемы, потери)
6. ⭐ Качество обслуживания (детальные рейтинги 1-5★)
7. 🌐 Внешние факторы (погода + праздники) **NEW!**
8. 🤖 AI-анализ и стратегические рекомендации **NEW!**
9. 🏆 Сравнительный бенчмаркинг (vs рынок) **NEW!**
10. 💡 Стратегические рекомендации (приоритеты + цели) **NEW!**

## 🛠️ БЫСТРЫЙ СТАРТ

### Установка зависимостей:
```bash
pip install -r requirements.txt
```

### 🔑 Настройка API (опционально):
```bash
# Скопируйте файл примера
cp .env.example .env

# Отредактируйте .env и добавьте ваши API ключи:
# OPENAI_API_KEY=your_openai_api_key_here
# WEATHER_API_KEY=your_openweathermap_api_key_here  
# CALENDAR_API_KEY=your_calendarific_api_key_here
```

**💡 Система работает и БЕЗ API ключей** - используются улучшенные симуляции!

### 📋 Основные команды:

```bash
# 📋 Список всех ресторанов
python main.py list

# 🔬 Полный анализ с использованием всех 63 параметров + API
python main.py analyze "Ika Canggu"

# 📅 Анализ за определенный период
python main.py analyze "Ika Canggu" --start 2025-04-01 --end 2025-06-30

# 🌍 Анализ всего рынка
python main.py market --start 2025-04-01 --end 2025-06-30

# 🌐 Проверка статуса API
python main.py check-apis
```

## 📊 ПРИМЕРЫ ДЕТАЛЬНЫХ ОТЧЕТОВ

> **💡 Примечание:** Ниже представлены сокращенные версии реальных отчетов. Полные отчеты содержат ~300 строк анализа в консоли + профессионально структурированные файлы в папке `reports/`.

### 🔬 **АНАЛИЗ РЕСТОРАНА "IKA CANGGU" (АПРЕЛЬ-ИЮНЬ 2025):**

```
🎯 MUZAQUEST ANALYTICS - ПОЛНЫЙ АНАЛИЗ ВСЕХ ПАРАМЕТРОВ + API
═══════════════════════════════════════════════════════════════════════════════
🚀 Используем ВСЕ 63 поля из grab_stats и gojek_stats!
🌐 + OpenAI API + Weather API + Calendar API

🔬 ПОЛНЫЙ АНАЛИЗ ВСЕХ ПАРАМЕТРОВ + API: IKA CANGGU
📅 Период анализа: 2025-04-01 → 2025-06-30

📊 1. ИСПОЛНИТЕЛЬНОЕ РЕЗЮМЕ
💰 Общая выручка: 1,080,876,000 IDR
📦 Общие заказы: 2,648
💵 Средний чек: 408,186 IDR
📊 Дневная выручка: 13,022,602 IDR
⭐ Средний рейтинг: 4.79/5.0
👥 Обслужено клиентов: 1,568
🎯 ROAS: 30.05x
📈 ROI маркетинга: +2904.8%

📈 2. АНАЛИЗ ПРОДАЖ И ТРЕНДОВ
📊 Динамика по месяцам:
  Апрель: 412,485,700 IDR (30 дней, 13,749,523 IDR/день)
  Май: 436,046,600 IDR (31 дней, 14,066,019 IDR/день)
  Июнь: 232,343,700 IDR (22 дней, 10,561,077 IDR/день)

🗓️ Выходные vs Будни:
  📅 Средние продажи в выходные: 13,290,446 IDR
  📅 Средние продажи в будни: 12,913,649 IDR
  📊 Эффект выходных: +2.9%

🏆 Лучший день: 2025-05-18 - 23,592,200 IDR

👥 3. ДЕТАЛЬНЫЙ АНАЛИЗ КЛИЕНТСКОЙ БАЗЫ
📊 Структура клиентской базы:
  🆕 Новые клиенты: 766 (48.9%)
  🔄 Повторные клиенты: 711 (45.3%)
  📲 Реактивированные: 91 (5.8%)

💰 Доходность по типам клиентов:
  🆕 Новые: 293,184,400 IDR (средний чек: 382,747 IDR)
  🔄 Повторные: 165,662,300 IDR (средний чек: 232,999 IDR)

📈 4. МАРКЕТИНГОВАЯ ЭФФЕКТИВНОСТЬ И ВОРОНКА
📊 Маркетинговая воронка:
  👁️ Показы рекламы: 143,408
  🔗 Посещения меню: 6,729 (CTR: 4.69%)
  🛒 Добавления в корзину: 1,425 (Rate: 21.18%)
  ✅ Конверсии: 992 (Rate: 14.74%)

💸 Стоимость привлечения:
  💰 Стоимость клика: 4,071 IDR
  💰 Стоимость конверсии: 27,612 IDR
  💰 Стоимость заказа: 19,048 IDR

🎯 ROAS по месяцам:
  Апрель: 31.25x
  Май: 33.37x
  Июнь: 23.06x

⚠️ 5. ОПЕРАЦИОННАЯ ЭФФЕКТИВНОСТЬ
🏪 Операционные показатели:
  🚫 Дней закрыт: 2 (2.4%)
  📦 Дней с дефицитом товара: 0 (0.0%)
  ❌ Отмененные заказы: 2

💔 Потенциальные потери от операционных проблем:
  💸 Ориентировочные потери: 26,045,205 IDR (2.4%)

⏱️ Качество обслуживания (Gojek):
  ✅ Процент выполненных заказов: 90.7%
  📈 Потенциал улучшения до 95%: +46,466,820 IDR

⭐ 6. КАЧЕСТВО ОБСЛУЖИВАНИЯ И УДОВЛЕТВОРЕННОСТЬ
📊 Распределение оценок (всего: 148):
  ⭐⭐⭐⭐⭐ 5 звезд: 134 (90.5%)
  ⭐⭐⭐⭐ 4 звезд: 1 (0.7%)
  ⭐⭐⭐ 3 звезд: 4 (2.7%)
  ⭐ 1 звезд: 9 (6.1%)

📈 Индекс удовлетворенности: 2.27/5.0
🚨 Негативные отзывы (1-2★): 9 (6.1%)

🌐 7. АНАЛИЗ ВНЕШНИХ ФАКТОРОВ
🌤️ Влияние погоды на продажи:
  📊 Средние продажи по погодным условиям:
    ☀️ Clear: 12,287,422 IDR (9 дней)
    ☁️ Clouds: 22,831,100 IDR (1 дней)

📅 Влияние праздников:
  🎉 Праздничных дней в периоде: 9
  📊 Средние продажи в праздники: 12,545,867 IDR
  📊 Средние продажи в обычные дни: 13,080,584 IDR
  🎯 Влияние праздников: -4.1%

🤖 8. AI-АНАЛИЗ И СТРАТЕГИЧЕСКИЕ РЕКОМЕНДАЦИИ
🎯 ДЕТАЛЬНЫЙ БИЗНЕС-АНАЛИЗ И СТРАТЕГИЧЕСКИЕ ИНСАЙТЫ
📊 ОПЕРАЦИОННАЯ ЭФФЕКТИВНОСТЬ:
   • Дневная выручка: 13,022,602 IDR
   • Средний чек: 408,186 IDR
   • Клиентов в день: 19
   • Заказов в день: 31.9

🔄 АНАЛИЗ ТРЕНДОВ:
   🚨 КРИТИЧНО: Падение на 18.6%
   🔥 Стратегия: Срочная антикризисная программа

💸 МАРКЕТИНГОВАЯ ЭФФЕКТИВНОСТЬ:
   🏆 ОТЛИЧНО: Исключительный ROAS (30.05x)
   💡 Рекомендация: Увеличить бюджет в 2-3 раза
   🎯 Потенциал масштабирования: высокий

👥 КЛИЕНТСКАЯ БАЗА:
   ✅ ХОРОШО: Приемлемая лояльность (45.3%)
   💡 Стратегия: Внедрите систему бонусов

📊 9. СРАВНИТЕЛЬНЫЙ АНАЛИЗ И БЕНЧМАРКИ
🏆 Ключевые показатели vs рыночные стандарты:
  Средний чек: 408,186 IDR vs 350,000 IDR - 🟢 ВЫШЕ (+16.6%)
  ROAS: 30.0x vs 4.0x - 🟢 ВЫШЕ (+651.2%)
  Удовлетворенность: 2.3/5.0 vs 4.5/5.0 - 🔴 НИЖЕ (-49.7%)
  Повторные клиенты: 45.3% vs 60.0% - 🔴 НИЖЕ (-24.4%)

💡 10. СТРАТЕГИЧЕСКИЕ РЕКОМЕНДАЦИИ
🎯 Приоритетные действия:
  1. 📉 КРИТИЧНО: Падение продаж на 28.2% - срочно пересмотреть стратегию
  2. 🚀 Отличный ROAS (30.0x) - увеличить рекламный бюджет
  3. 🌧️ Влияние погоды (-18.1%) - стратегия для дождливых дней

🎯 ЦЕЛИ НА СЛЕДУЮЩИЙ ПЕРИОД:
   • Выручка: 1,243,007,400 IDR (+15%)
   • Средний чек: 449,004 IDR (+10%)
   • Повторные клиенты: 55% (+10п.п.)
   • Рейтинг: 5.0/5.0
   • ROAS: 33.1x (+10%)
```

### 🌍 **ДЕТАЛЬНЫЙ АНАЛИЗ ВСЕГО РЫНКА (АПРЕЛЬ-ИЮНЬ 2025):**

```
🌍 ДЕТАЛЬНЫЙ АНАЛИЗ ВСЕГО РЫНКА MUZAQUEST
📅 Период анализа: 2025-04-01 → 2025-06-30

📊 1. ОБЗОР РЫНКА
🏪 Активных ресторанов: 59
💰 Общие продажи рынка: 1,220,092,529,621 IDR (~1.22 триллиона)
📦 Общие заказы рынка: 4,895,556
📊 Средние продажи на ресторан: 20,679,534,400 IDR
💵 Средний чек рынка: 249,225 IDR
⭐ Средний рейтинг рынка: 4.67/5.0
🎯 ROAS рынка: 16.58x
👥 Новых клиентов на рынке: 1,805,238

🏆 2. ЛИДЕРЫ РЫНКА
ТОП-10 по продажам:
  1. Prana                     147,307,823,554 IDR
     📦 661,731 заказов | 💰 222,610 IDR/заказ | ⭐ 4.70
     📊 1,796M IDR/день | 🎯 ROAS: 18.9x | 👥 118,847 новых
  2. Pinkman                   111,853,683,750 IDR
     📦 566,866 заказов | 💰 197,319 IDR/заказ | ⭐ 4.76
     📊 1,364M IDR/день | 🎯 ROAS: 14.3x | 👥 332,249 новых
  3. Ika Canggu                89,198,410,400 IDR
     📦 218,340 заказов | 💰 408,530 IDR/заказ | ⭐ 4.80
     📊 1,088M IDR/день | 🎯 ROAS: 30.0x | 👥 63,474 новых

📈 3. СЕГМЕНТАЦИЯ РЫНКА
💎 ПРЕМИУМ СЕГМЕНТ (350K+ IDR): 5 ресторанов, 23.8% рынка
🏷️ СРЕДНИЙ СЕГМЕНТ (200-350K IDR): 5 ресторанов, 28.1% рынка  
💰 БЮДЖЕТНЫЙ СЕГМЕНТ (<200K IDR): 5 ресторанов, 23.2% рынка

⚡ 4. ЭФФЕКТИВНОСТЬ
🎯 ТОП ROAS: Ika Canggu (30.0x), Ika Ubud (26.6x), Teamo (25.4x)
⭐ ТОП Рейтинг: Pink man 2 (4.82), Signa (4.80), Ika Canggu (4.80)

🤖 5. AI-АНАЛИЗ РЫНКА
🏆 КРУПНЫЙ РЫНОК: Оборот превышает 1 триллион IDR
✅ КОНКУРЕНЦИЯ: Фрагментированный рынок (ТОП-3: 28.6%)
🏆 ПРЕВОСХОДНО: Исключительная эффективность (ROAS 16.6x)
💡 Стратегия: Рынок готов для масштабирования инвестиций

📊 ПРОГНОЗЫ:
• Потенциал роста: 25%
• Целевой ROAS: 18.2x (+10%)
• Целевой средний чек: 274,148 IDR (+10%)
```

## 🌐 API ИНТЕГРАЦИИ

### 🤖 **OpenAI API (GPT-4)**
- **Функция**: AI-анализ данных и генерация умных рекомендаций
- **Получить ключ**: https://platform.openai.com/api-keys
- **Стоимость**: ~$10-30/месяц (зависит от использования)
- **Без ключа**: Используется автоматический анализ

### 🌤️ **Weather API (OpenWeatherMap)**
- **Функция**: Анализ влияния погоды на продажи
- **Получить ключ**: https://openweathermap.org/api
- **Стоимость**: ~$5-10/месяц (исторические данные)
- **Без ключа**: Используется симуляция погоды

### 📅 **Calendar API (Calendarific)**
- **Функция**: Анализ влияния праздников на бизнес
- **Получить ключ**: https://calendarific.com/
- **Стоимость**: Бесплатно (до 1000 запросов/месяц)
- **Без ключа**: Используется локальная база праздников

## 🗃️ СТРУКТУРА БАЗЫ ДАННЫХ

### 📊 GRAB_STATS (30 полей):
- Продажи, заказы, рейтинги
- Рекламные кампании (затраты, CTR, показы)
- Клиентская база (новые/повторные/реактивированные)
- Операционные проблемы (закрыт/занят/нет товара)
- Финансовые данные

### 📊 GOJEK_STATS (33 поля):
- Основные метрики + уникальные для Gojek
- Времена обслуживания (принятие/приготовление/доставка)
- Детальные рейтинги (1-5 звезд)
- Логистические данные
- Операционная эффективность

## 🎯 ВОЗМОЖНОСТИ СИСТЕМЫ

### 🔍 ML-АНАЛИЗ И ВЫЯВЛЕНИЕ:
- 📊 **Аномалии в данных** (резкие изменения)
- 📈 **Тренды и закономерности** (сезонность, циклы)
- 🎯 **Причины падения продаж** (реклама, погода, праздники)
- ⏱️ **Влияние времени готовки** на рейтинги
- 👥 **Изменения в поведении клиентов**

### 🌐 АНАЛИЗ ВНЕШНИХ ФАКТОРОВ:
- 🌧️ **Влияние погоды** на продажи (дождь, температура)
- 🎉 **Влияние праздников** на заказы и выручку
- 📅 **Сезонные паттерны** и календарные эффекты
- 🕌 **Религиозные праздники** (Рамадан, Ид и др.)

### 🤖 AI-POWERED ИНСАЙТЫ:
- 💡 **Автоматическая генерация** рекомендаций
- 📊 **Экспертный анализ** данных с помощью GPT-4
- 🎯 **Персонализированные советы** для каждого ресторана
- 📈 **Прогнозы и стратегии** развития

### 📅 СРАВНИТЕЛЬНАЯ АНАЛИТИКА:
- Квартал к кварталу
- Год к году
- Периоды до/после изменений
- Сравнение с конкурентами

## 📁 СТРУКТУРА ПРОЕКТА

```
muzaquest-analytics/
├── main.py                           # 🚀 Основной CLI (ВСЕ 63 параметра + API)
├── database.sqlite                   # 📊 База данных (4MB, 24K записей)
├── requirements.txt                  # 📦 Зависимости Python
├── .env.example                      # 🔑 Пример настройки API ключей
├── data/                            # 📁 Данные
│   ├── database.sqlite              # 💾 Рабочая БД
│   └── README.md                    # 📋 Описание данных
├── reports/                         # 📄 Автоматические отчеты с API
├── COMPLETE_ANALYSIS_PARAMETERS.md  # ✅ Документация всех параметров
└── README.md                        # 📖 Этот файл
```

## 🔧 ТЕХНИЧЕСКИЕ ДЕТАЛИ

### 📚 Зависимости:
- **Python 3.x**
- **pandas** - обработка данных
- **numpy** - численные вычисления
- **requests** - HTTP запросы к API
- **python-dotenv** - работа с .env файлами
- **openai** - интеграция с OpenAI GPT
- **sqlite3** - работа с БД
- **argparse** - CLI интерфейс

### 💾 Автоматическое сохранение:
- Все отчеты → `reports/`
- Детальная аналитика по всем 63 параметрам
- AI-инсайты и рекомендации
- Данные погоды и праздников
- Временные метки для версионности

### 🔐 Защита данных:
- Только чтение БД (read-only режим)
- Безопасные API запросы с таймаутами
- .env файл в .gitignore (API ключи защищены)
- Проверка входных параметров

## 📊 ДОСТУПНЫЕ ДАННЫЕ

### 🏪 Рестораны: **59 активных**
### 📅 Период: **2023-01-01 → 2025-06-22**
### 📈 Записей: **24,356**
### 🗂️ Параметров: **63 поля + 3 API**

### 🏆 ТОП-3 по продажам (апрель-июнь 2025):
1. **Prana** - 147.3B IDR (661K заказов, средний чек 222K IDR)
2. **Pinkman** - 111.9B IDR (567K заказов, средний чек 197K IDR)  
3. **Ika Canggu** - 89.2B IDR (218K заказов, средний чек 409K IDR)

## ✅ ГОТОВНОСТЬ СИСТЕМЫ

✅ **ВСЕ 63 ПАРАМЕТРА** используются в анализе  
✅ **3 API ИНТЕГРАЦИИ** (OpenAI + Weather + Calendar)  
✅ **ML-алгоритмы** для выявления аномалий  
✅ **Комплексная аналитика** по 10 направлениям  
✅ **AI-рекомендации** на основе GPT-4  
✅ **Анализ внешних факторов** (погода + праздники)  
✅ **Интеграция платформ** Grab + Gojek  
✅ **Сравнительная аналитика** по периодам  
✅ **Чистый репозиторий** без лишних файлов  
✅ **Профессиональные отчеты** уровня топ-консалтинга

## 🆘 ПОДДЕРЖКА

Для получения помощи:
```bash
python main.py --help
python main.py check-apis  # Проверка статуса API
```

Детальная документация всех параметров: `COMPLETE_ANALYSIS_PARAMETERS.md`

### 🔑 Быстрая настройка API:
```bash
# 1. Скопируйте пример
cp .env.example .env

# 2. Отредактируйте .env файл
nano .env

# 3. Проверьте статус
python main.py check-apis
```

---

**🎯 MUZAQUEST ANALYTICS** - профессиональная система для глубокого анализа ресторанного бизнеса с использованием всех доступных данных, современных ML-технологий и AI-рекомендаций.