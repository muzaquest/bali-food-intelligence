# 🍽️ Muzaquest Bali Food Intelligence

> **Интеллектуальная система анализа продаж ресторанов на Бали с ML и детективным анализом**

[![Python](https://img.shields.io/badge/Python-3.8%2B-blue)](https://python.org)
[![ML](https://img.shields.io/badge/ML-Ready-green)](https://scikit-learn.org)
[![Status](https://img.shields.io/badge/Status-Production-success)](https://replit.com)

## 🚀 Возможности

### 🕵️ **Детективный анализ продаж**
- **Автоматическое обнаружение** проблемных дней с падением продаж
- **Факторный анализ** с 12+ параметрами влияния
- **Погодная аналитика** через Open-Meteo API
- **164 праздника** (балийские, мусульманские, международные)
- **Временные показатели**: доставка, готовка, ожидание водителей
- **ROAS анализ** эффективности рекламы

### 🤖 **ML система**
- **67+ факторов** для машинного обучения
- **RandomForest + SHAP** для объяснимого AI
- **Прогнозирование** продаж и трендов
- **Геолокационная аналитика** 59 ресторанов

### 📊 **Данные**
- **База данных**: 13,000+ записей продаж
- **Платформы**: Grab, Gojek
- **Период**: 2024-2025
- **Туристические данные**: посещаемость Бали

## 📁 Структура проекта

```
muzaquest-bali-food-intelligence/
├── README.md                     # Главная документация
├── main.py                      # 🎯 Точка входа
├── database.sqlite              # База данных (4MB)
├── requirements.txt             # Зависимости
│
├── src/                         # 📦 Исходный код
│   ├── analyzers/              # 🔍 Анализаторы
│   │   └── production_sales_analyzer.py  # Основной детективный анализатор
│   ├── ml_models/              # 🤖 ML модели
│   ├── api/                    # 🌐 Веб интерфейсы
│   └── utils/                  # 🛠️ Утилиты
│
├── data/                       # 📊 Данные
│   ├── comprehensive_holiday_analysis.json  # 164 праздника
│   ├── bali_restaurant_locations.json       # GPS координаты
│   └── tourism/                             # Туристические данные
│
├── docs/                       # 📚 Документация
│   └── guides/                 # Руководства по развертыванию
│
└── tests/                      # 🧪 Тесты
```

## ⚡ Быстрый старт

### 1. Установка
```bash
git clone https://github.com/muzaquest/bali-food-intelligence.git
cd bali-food-intelligence
pip install -r requirements.txt
```

### 2. Запуск детективного анализа
```python
from src.analyzers import ProductionSalesAnalyzer

analyzer = ProductionSalesAnalyzer()
result = analyzer.analyze_restaurant_performance(
    restaurant_name="Ika Canggu",
    start_date="2025-04-01", 
    end_date="2025-05-31"
)

for line in result:
    print(line)
```

### 3. Веб интерфейс
```bash
python main.py
# Откройте http://localhost:5000
```

## 📊 ПРИМЕРЫ РЕАЛЬНЫХ ОТЧЕТОВ

> **💎 ВНИМАНИЕ:** Ниже представлены РЕАЛЬНЫЕ отчеты системы. Каждый анализ содержит ~50+ строк детального анализа с использованием всех факторов + API интеграции.

### 🔬 **ПОЛНЫЙ АНАЛИЗ ВСЕХ ПАРАМЕТРОВ + API: ONLY EGGS**
================================================================================
📅 Период анализа: 2025-04-01 → 2025-05-31

📊 1. ИСПОЛНИТЕЛЬНОЕ РЕЗЮМЕ
----------------------------------------
💰 Общая выручка: 486,883,500 IDR (GRAB + GOJEK)
📦 Общие заказы: 2,670
   ├── 📱 GRAB: 1,973 (успешно: 1,971, отменено: 2)
   └── 🛵 GOJEK: 697 (успешно: 654, отменено: 3, потеряно: 40)
   💡 Успешных заказов: 2,625
💵 Средний чек: 182,353 IDR
   ├── 📱 GRAB: 192,217 IDR (379,243,900 ÷ 1,973)
   └── 🛵 GOJEK: 154,433 IDR (107,639,600 ÷ 697)
📊 Дневная выручка: 7,981,697 IDR (средняя по рабочим дням)
⭐ Средний рейтинг: 4.79/5.0
👥 Обслужено клиентов: 1,910
   ├── 📱 GRAB: 1,797 (детальная статистика)
   └── 🛵 GOJEK: 113 (ограниченная API статистика)
   💡 Общий охват: 1,910 уникальных клиентов
💸 Маркетинговый бюджет: 18,748,004 IDR (GRAB + GOJEK)
   ├── 📱 GRAB: 16,490,986 IDR (88.0%)
   └── 🛵 GOJEK: 2,257,018 IDR (12.0%)

🎯 ROAS АНАЛИЗ:
├── 📱 GRAB: 13.90x (продажи: 229,272,400 IDR / бюджет: 16,490,986 IDR)
├── 🛵 GOJEK: 23.13x (продажи: 52,194,600 IDR / бюджет: 2,257,018 IDR)
└── 🎯 ОБЩИЙ: 15.01x (продажи: 281,467,000 IDR / бюджет: 18,748,004 IDR)

⚠️ МЕТОДИКА: 
• GRAB: учитывает только прямые продажи от рекламы
• GOJEK: включает все продажи в период активной рекламы
• Сравнение с рынком: только рестораны с полными рекламными данными

📈 ROI маркетинга: +1401.3% (GRAB + GOJEK)
   ├── 📱 GRAB: +1290.3% (продажи: 229,272,400 - бюджет: 16,490,986)
   └── 🛵 GOJEK: +2212.5% (продажи: 52,194,600 - бюджет: 2,257,018)

💡 ИНСАЙТЫ ПО ЭФФЕКТИВНОСТИ ПЛАТФОРМ:
• 🛵 GOJEK БОЛЕЕ ЭФФЕКТИВЕН: +2212.5% vs +1290.3% (в 1.7 раза)
• 💰 GRAB: больший бюджет (16.5M), GOJEK: меньший бюджет (2.3M)
• 🎯 ROAS: GRAB 13.9x, GOJEK 23.1x

🎯 СТРАТЕГИЧЕСКИЕ РЕКОМЕНДАЦИИ:
• 📊 Общий ROI ОТЛИЧНЫЙ (+1401.3%) - обе платформы прибыльны
• 🚀 ПРИОРИТЕТ: Увеличить бюджет GOJEK - самая высокая отдача
• 🔧 Оптимизировать GRAB - потенциал роста эффективности

📅 Период: 61 дней

💰 1.1 ВЫПЛАТЫ РЕСТОРАНУ
----------------------------------------
💵 Реальные поступления ресторану: 355,471,259 IDR
   ├── 📱 GRAB: 275,710,315 IDR (выручка: 379,243,900 - комиссия: 27.3%)
   └── 🛵 GOJEK: 79,760,944 IDR (выручка: 107,639,600 - комиссия: 25.9%)

📊 Анализ комиссий:
   💸 Общая комиссия: 131,412,241 IDR (27.0% от выручки)
   📱 GRAB: 103,533,585 IDR (27.3%)
   🛵 GOJEK: 27,878,656 IDR (25.9%)

💡 GOJEK выгоднее по комиссии на 1.4%

📈 2. АНАЛИЗ ПРОДАЖ И ТРЕНДОВ
----------------------------------------
📊 Динамика по месяцам:
  Апрель: 222,865,600 IDR (30 дней, 7,428,853 IDR/день)
  Май: 264,017,900 IDR (31 дней, 8,516,706 IDR/день)

🗓️ Выходные vs Будни:
  📅 Средние продажи в выходные: 8,322,382 IDR
  📅 Средние продажи в будни: 7,850,068 IDR
  📊 Эффект выходных: +6.0%
📊 АНАЛИЗ РАБОЧИХ ДНЕЙ (61 дней):
🏆 Лучший день: 2025-05-12 - 11,425,200 IDR
📉 Худший день: 2025-04-21 - 1,793,000 IDR
📊 Разброс продаж: 537.2% (только рабочие дни)
📈 Средние продажи: 7,981,697 IDR/день
📊 Коэффициент вариации: 22.3% (стабильность продаж)

👥 3. ДЕТАЛЬНЫЙ АНАЛИЗ КЛИЕНТСКОЙ БАЗЫ
----------------------------------------
📊 Структура клиентской базы (GRAB + GOJEK):
  🆕 Новые клиенты: 1,088 (57.0%)
    📱 GRAB: 1,041 | 🛵 GOJEK: 47
  🔄 Повторные клиенты: 784 (41.0%)
    📱 GRAB: 722 | 🛵 GOJEK: 62
  📲 Реактивированные: 38 (2.0%)
    📱 GRAB: 34 | 🛵 GOJEK: 4

💰 Доходность по типам клиентов (только GRAB):
  🆕 Новые: 145,191,900 IDR (средний чек: 139,473 IDR) - только 1041 клиентов GRAB
  🔄 Повторные: 71,932,200 IDR (средний чек: 99,629 IDR) - только 722 клиентов GRAB
  📲 Реактивированные: 6,552,500 IDR (средний чек: 192,721 IDR) - только 34 клиентов GRAB

  ⚠️ КРИТИЧНО: Данные о доходах от 113 клиентов GOJEK ОТСУТСТВУЮТ в базе данных
  📊 Это означает, что реальная доходность может быть выше указанной

📈 Приобретение новых клиентов по месяцам:
  Апрель: 458 новых клиентов
  Май: 630 новых клиентов

📈 4. МАРКЕТИНГОВАЯ ЭФФЕКТИВНОСТЬ И ВОРОНКА
----------------------------------------
📊 Маркетинговая воронка (только GRAB - GOJEK не предоставляет данные воронки):
  👁️ Показы рекламы: 132,873
  🔗 Посещения меню: 5,905 (CTR: 4.44%)
  🛒 Добавления в корзину: 1,450 (конверсия: 24.56% от кликов)
  📦 Заказы от рекламы: 1,129 (конверсия: 77.9% от корзины)
  
  📊 КЛЮЧЕВЫЕ КОНВЕРСИИ:
  • 🎯 Показ → Заказ: 0.85% (основная метрика эффективности)
  • 🔗 Клик → Заказ: 19.1% (качество трафика)
  • 🛒 Корзина → Заказ: 77.9% (качество UX)

💸 Стоимость привлечения (только GRAB):
  💰 Стоимость клика: 2,793 IDR
  💰 Стоимость заказа: 14,607 IDR

💰 Финансовые показатели маркетинга:
  📱 GRAB: 16,490,986 IDR бюджет → 229,272,400 IDR доход (1129.0 заказов)
  🛵 GOJEK: 2,257,018 IDR бюджет → 52,194,600 IDR доход (181 заказов)
  🎯 ИТОГО: 18,748,004 IDR бюджет → 281,467,000 IDR доход (1310.0 заказов)

🎯 ROAS АНАЛИЗ:
├── 📱 GRAB: 13.90x (продажи: 229,272,400 IDR / бюджет: 16,490,986 IDR)
├── 🛵 GOJEK: 23.13x (продажи: 52,194,600 IDR / бюджет: 2,257,018 IDR)
└── 🎯 ОБЩИЙ: 15.01x (продажи: 281,467,000 IDR / бюджет: 18,748,004 IDR)

⚠️ МЕТОДИКА: 
• GRAB: учитывает только прямые продажи от рекламы
• GOJEK: включает все продажи в период активной рекламы
• Сравнение с рынком: только рестораны с полными рекламными данными

🎯 ROAS по месяцам (GRAB + GOJEK):
  Апрель: 15.43x
  Май: 14.65x

⚠️ 5. ОПЕРАЦИОННАЯ ЭФФЕКТИВНОСТЬ
----------------------------------------
🏪 Операционные показатели:
  🚫 Дней с отменами 'ресторан закрыт': 2 (3.3%)
  🔥 Дней занят: 0 (0.0%)
  ⏰ Дней 'скоро закрытие': 0 (0.0%)
  📦 Дней с дефицитом товара: 3 (4.9%)
  ❌ Всего отмененных заказов: 5

💡 Пояснение: 'Дни с отменами по закрытию' означают дни, когда сотрудники
   отменяли заказы с причиной 'ресторан закрыт' (обычно поздние заказы)

💔 Реальные потери от операционных проблем:
  💸 От отмененных заказов: 911,767 IDR (5 × 182,353 IDR)
  💸 От дней 'занят/нет товара': 7,183,527 IDR
  💸 Общие потери: 8,095,294 IDR
  📊 % от общей выручки: 1.7%

⏱️ Качество обслуживания (Gojek):
  ✅ Процент выполненных заказов: 92.1%
  ❌ Потерянные заказы: 40
  📈 Потенциал улучшения до 95%: +14,131,395 IDR

🔧 ОПЕРАЦИОННЫЕ СБОИ ПЛАТФОРМ:

├── 📱 GRAB: 2 критичных дня (7.0ч)
├── 🛵 GOJEK: 3 критичных дня (4.7ч)
└── 💸 Потенциальные потери: 1,828,113 IDR

🚨 КРИТИЧНЫЕ СБОИ (>1 часа):
   1. 2025-05-15: GRAB offline 5:57:00 (потери: ~1,237,588 IDR)
   2. 2025-05-06: GRAB offline 1:00:00 (потери: ~207,616 IDR)
   3. 2025-04-27: GOJEK offline 2:30:13 (потери: ~203,639 IDR)
   4. 2025-04-02: GOJEK offline 1:10:00 (потери: ~95,248 IDR)
   5. 2025-04-09: GOJEK offline 1:01:48 (потери: ~84,022 IDR)

⭐ 6. КАЧЕСТВО ОБСЛУЖИВАНИЯ И УДОВЛЕТВОРЕННОСТЬ
----------------------------------------
📊 Распределение оценок (всего: 38):
  ⭐⭐⭐⭐⭐ 5 звезд: 35 (92.1%)
  ⭐⭐⭐⭐ 4 звезд: 1 (2.6%)
  ⭐⭐⭐ 3 звезд: 0 (0.0%)
  ⭐⭐ 2 звезд: 0 (0.0%)
  ⭐ 1 звезд: 2 (5.3%)

📈 Индекс удовлетворенности: 4.76/5.0
🚨 Негативные отзывы (1-2★): 2 (5.3%)

📊 Частота плохих оценок (не 5★) - только GOJEK:
  📈 Плохих оценок всего: 3 из 38 (7.9%)
  📦 Заказов GOJEK на 1 плохую оценку: 232.3
  💡 Это означает: каждый 232-й заказ GOJEK получает оценку не 5★
  🟢 ОТЛИЧНО: Очень редкие плохие оценки

🔍 7. ДЕТЕКТИВНЫЙ АНАЛИЗ ПРОБЛЕМНЫХ ДНЕЙ ⭐ ОБНОВЛЕНО!
----------------------------------------
🚨 Найдено 5 проблемных дней с падением продаж >20%:

📉 ПРОБЛЕМНЫЙ ДЕНЬ #1: 2025-05-15
   💔 Падение продаж: -67.8% (1,250,000 IDR)
   📊 Grab: 0 IDR | Gojek: 1,250,000 IDR

   🔍 ФАКТОРЫ ВЛИЯНИЯ:
      1. 🚨 КРИТИЧНО: Grab offline 357% (5ч 57м выключен!)
      2. ⚠️ Gojek Delivery +89% (19.8мин vs 10.5мин)
      3. ⚠️ Gojek Driver Waiting +67% (16мин vs 9.6мин)
      4. ✅ Gojek ROAS отличный: 25.0
      5. 🌤️ Ясная погода (+влияние)
      6. 📅 Слабый день недели (Wednesday)

   🚨 КРИТИЧЕСКИЕ ПРОБЛЕМЫ:
      • Критическое выключение Grab (5ч 57м)
      • Проблемы с доставкой Gojek

   📊 ОЦЕНКА: 🔴 КРИТИЧЕСКОЕ негативное влияние (87 баллов)

📉 ПРОБЛЕМНЫЙ ДЕНЬ #2: 2025-05-18
   💔 Падение продаж: -45.2% (2,127,000 IDR)
   📊 Grab: 0 IDR | Gojek: 2,127,000 IDR

   🔍 ФАКТОРЫ ВЛИЯНИЯ:
      1. 🚨 КРИТИЧНО: Gojek Delivery +134% (24.6мин vs 10.5мин)
      2. ⚠️ Gojek Preparation +38% (19.4мин vs 14.1мин)
      3. ⚠️ Gojek Driver Waiting +46% (14мин vs 9.6мин)
      4. ✅ Gojek ROAS отличный: 25.0
      5. 🎉 Праздник Tilem: +22.0% влияние
      6. 📅 Хороший день недели (Saturday)

   📊 ОЦЕНКА: 🟠 УМЕРЕННОЕ негативное влияние (68 баллов)

💡 ОБЩИЕ РЕКОМЕНДАЦИИ:
   1. 🚨 КРИТИЧНО: Исправить проблемы с Grab (постоянно offline)
   2. ⏱️ ВАЖНО: Оптимизировать время доставки Gojek
   3. 🎯 УЛУЧШИТЬ: Время готовки блюд
   4. ✅ ПРОДОЛЖИТЬ: Отличная эффективность рекламы (ROAS 25.0)
   5. 📅 ПЛАНИРОВАТЬ: Учитывать влияние праздников

📊 СТАТИСТИКА АНАЛИЗА:
   • Проанализировано дней: 61
   • Найдено проблемных: 5 (8.2%)
   • Средний impact score: 67 баллов
   • Основная проблема: Grab offline (80% случаев)
   • Лучший ROAS: 25.0x (Gojek)

🤖 8. ML ДЕТЕКТИВНЫЙ АНАЛИЗ (SHAP ОБЪЯСНИМОСТЬ) ⭐ ТРЕБУЕТ ДОРАБОТКИ!
----------------------------------------
🧠 Технология: Random Forest + SHAP объяснимость
📊 Точность модели: R² = 85% (на тестовых данных)
🎯 Анализируемые факторы: 35 внешних факторов (БЕЗ циркулярной логики)

🔍 ОБНАРУЖЕНО 15 ЗНАЧИТЕЛЬНЫХ АНОМАЛИЙ для Only Eggs:

### 2025-05-15: 🔴 ПАДЕНИЕ на -67.8%
💰 Продажи: 1,250,000 IDR (прогноз ML: 3,876,543 IDR)

🧠 ML ОБЪЯСНЕНИЕ:
   • 🚨 Grab offline: -45.2% влияния (-1,751,234 IDR)
   • ⏱️ Время доставки: -12.8% влияния (-495,637 IDR)
   • 🔄 Низкая лояльность: -8.4% влияния (-325,429 IDR)
   • ❓ Необъясненное влияние: 1.6%

### 2025-04-21: 🔴 ПАДЕНИЕ на -77.5%
💰 Продажи: 1,793,000 IDR (прогноз ML: 7,972,000 IDR)

🧠 ML ОБЪЯСНЕНИЕ:
   • 🎉 Праздник Odalan: -42.1% влияния (-3,355,308 IDR)
   • ⏱️ Время готовки: -18.7% влияния (-1,490,564 IDR)
   • 🌧️ Погодные условия: -14.2% влияния (-1,132,124 IDR)
   • ❓ Необъясненное влияние: 2.5%

🏆 ГЛАВНЫЕ ДРАЙВЕРЫ ПРОДАЖ (по важности в модели):
   📱 Grab доступность: 42.18% важности
   ⏱️ Временные метрики: 28.64% важности
   🎉 Праздники: 12.91% важности
   🌤️ Погода: 8.41% важности
   📅 День недели: 4.60% важности
   💰 ROAS: 3.26% важности

💡 ML РЕКОМЕНДАЦИИ:
   1. 🚨 КРИТИЧНО: Стабильность Grab (приоритет #1)
   2. ⏱️ Оптимизация времен доставки/готовки
   3. 📅 Планирование под праздники
   4. 💰 Потенциал роста: +2,500,000 IDR/месяц при устранении проблем
```

### 🌍 **АНАЛИЗ ВСЕГО РЫНКА (59 РЕСТОРАНОВ):**

```
🌍 РЫНОЧНЫЙ АНАЛИЗ MUZAQUEST
📅 Период: 2025-04-01 - 2025-06-30
🏪 Ресторанов: 59 активных

📊 ОБЗОР РЫНКА:
💰 Общие продажи: 14,938,045,900 IDR (~15 миллиардов)
📦 Общие заказы: 60,103
💵 Средний чек рынка: 248,541 IDR
⭐ Средний рейтинг: 4.72/5.0
🎯 ROAS рынка: 16.69x
👥 Новых клиентов: 22,024

🏆 ТОП-5 ЛИДЕРОВ РЫНКА:
   1. Prana: 1,785,265,897 IDR
      📦 8,023 заказа | 💰 222,518 IDR/заказ | ⭐ 4.70
      🎯 ROAS: 18.9x | 👥 1,434 новых клиента

   2. Pinkman: 1,350,311,000 IDR
      📦 6,844 заказа | 💰 197,299 IDR/заказ | ⭐ 4.76
      🎯 ROAS: 14.3x | 👥 4,006 новых клиента

   3. Ika Canggu: 1,080,876,000 IDR
      📦 2,648 заказа | 💰 408,186 IDR/заказ | ⭐ 4.80
      🎯 ROAS: 30.0x | 👥 766 новых клиента

   4. Teamo: 763,038,300 IDR
      📦 1,892 заказа | 💰 403,377 IDR/заказ | ⭐ 4.77
      🎯 ROAS: 25.4x | 👥 623 новых клиента

   5. Signa: 738,604,200 IDR
      📦 2,866 заказа | 💰 257,783 IDR/заказ | ⭐ 4.80
      🎯 ROAS: 23.0x | 👥 1,456 новых клиента

📈 СЕГМЕНТАЦИЯ РЫНКА:
💎 ПРЕМИУМ СЕГМЕНТ (350K+ IDR средний чек):
   • Ресторанов: 5 (8.5% рынка)
   • Средний чек: 404,194 IDR
   • Доля выручки: 31.7%
   • Лидеры: Ika Canggu, Teamo, Ika Ubud

🏷️ СРЕДНИЙ СЕГМЕНТ (200-350K IDR):
   • Ресторанов: 25 (42.4% рынка)
   • Средний чек: 257,783 IDR
   • Доля выручки: 37.5%

💰 БЮДЖЕТНЫЙ СЕГМЕНТ (<200K IDR):
   • Ресторанов: 29 (49.1% рынка)
   • Средний чек: 193,501 IDR
   • Доля выручки: 30.8%

🎯 ТОП-5 ПО ЭФФЕКТИВНОСТИ (ROAS):
   1. Ika Canggu: 30.0x 🏆
   2. Ika Ubud: 26.6x
   3. Ika Uluwatu: 25.6x
   4. Teamo: 25.4x
   5. Signa: 23.0x

⭐ ТОП-5 ПО КАЧЕСТВУ (рейтинг):
   1. Pink man 2 (Berawa): 4.82/5.0
   2. Signa: 4.80/5.0
   3. Ika Canggu: 4.80/5.0
   4. Ika Kero: 4.80/5.0
   5. Only Eggs: 4.79/5.0

🏝️ ТУРИСТИЧЕСКИЙ АНАЛИЗ:
📊 2024: 3,518,643 туриста
📊 2025 (до мая): 2,723,230 туриста

ТОП-3 РЫНКА 2024:
   1. EUROPE: 638,863 (18.2%)
   2. Australian: 570,326 (16.2%)
   3. ASEAN: 267,515 (7.6%)

ТОП-3 РЫНКА 2025:
   1. China: 886,013 (32.5%)
   2. Australian: 521,265 (19.1%)
   3. Japan: 167,775 (6.2%)

💡 СТРАТЕГИЧЕСКИЕ РЕКОМЕНДАЦИИ:
   1. 🎯 Фрагментированный здоровый рынок
   2. 📈 Исключительная эффективность (ROAS 16.6x)
   3. 💰 Потенциал премиализации среднего чека
   4. ⭐ Высокие стандарты качества
   5. 🌍 Растущий китайский туристический поток

📊 ПРОГНОЗЫ:
   • Потенциал роста: +25%
   • Целевой ROAS: 18.4x
   • Целевой средний чек: 273,395 IDR
   • Целевой рейтинг: 4.9/5.0
```

### 🤖 **ML ДЕТЕКТИВНЫЙ АНАЛИЗ (SHAP ОБЪЯСНИМОСТЬ):**

```
🤖 ML-POWERED ДЕТЕКТИВНЫЙ АНАЛИЗ
📊 Технология: Random Forest + SHAP
🎯 Точность модели: R² = 85%

🔍 ОБНАРУЖЕНО 51 ЗНАЧИТЕЛЬНЫХ АНОМАЛИЙ для Ika Canggu:

### 2025-04-03: 🟢 РОСТ на +37.8%
💰 Продажи: 15,462,400 IDR (прогноз: 11,222,858 IDR)

🧠 ML ОБЪЯСНЕНИЕ:
   • 👥 Новые клиенты: +20.6% влияния (+2,312,992 IDR)
   • 🛒 Интерес к меню: +19.5% влияния (+2,186,733 IDR)
   • 🎯 Промо-заказы: +8.6% влияния (+970,284 IDR)
   • ❓ Необъясненное: 27.4%

### 2025-04-15: 🔴 ПАДЕНИЕ на -6.1%
💰 Продажи: 7,940,600 IDR (прогноз: 8,457,442 IDR)

🧠 ML ОБЪЯСНЕНИЕ:
   • 👥 Новые клиенты: +25.0% влияния (компенсация)
   • 🔄 Лояльные клиенты: -6.2% влияния (проблема)
   • 🛒 Интерес к меню: +23.3% влияния (компенсация)

🏆 ГЛАВНЫЕ ДРАЙВЕРЫ ПРОДАЖ:
   👥 Новые клиенты: 36.12% важности
   🔄 Лояльные клиенты: 29.64% важности
   🛒 Добавления в корзину: 10.91% важности
   🎯 Промо-заказы: 10.41% важности

💡 ML РЕКОМЕНДАЦИИ:
   1. 🔄 Программа лояльности (приоритет #1)
   2. 👥 Увеличить рекламный бюджет на 30%
   3. 🛒 Оптимизировать интерфейс корзины
   4. 📈 Каждый новый клиент = +211,427 IDR
```

## 🎯 Ключевые компоненты

### 🔍 ProductionSalesAnalyzer
**Главный анализатор** - `src/analyzers/production_sales_analyzer.py`

**Возможности:**
- ✅ Автоматический поиск проблемных дней
- ✅ Анализ временных отклонений (доставка +134%)
- ✅ Погодные условия (дождь, температура)
- ✅ 164 праздника с влиянием на продажи
- ✅ ROAS и эффективность рекламы
- ✅ Рейтинги и качество сервиса
- ✅ Close Time (выключение программ)

### 📊 Данные

**База данных:** `database.sqlite` (4MB)
- 13,000+ записей продаж
- Grab + Gojek статистика
- Временные метрики
- Рекламные данные

**Праздники:** `data/comprehensive_holiday_analysis.json`
- 164 праздника
- Балийские, мусульманские, международные
- Влияние на продажи в %

**Локации:** `data/bali_restaurant_locations.json`  
- 59 ресторанов
- GPS координаты для погоды
- Зоны: пляж, горы, центр, клифы

## 🚀 Развертывание на Replit

См. подробные инструкции: [`docs/guides/REPLIT_PRODUCTION_UPDATE.md`](docs/guides/REPLIT_PRODUCTION_UPDATE.md)

**Ключевые файлы для Replit:**
1. `src/analyzers/production_sales_analyzer.py` ← заменяет старый анализатор
2. `database.sqlite` ← база данных
3. `data/comprehensive_holiday_analysis.json` ← праздники
4. `data/bali_restaurant_locations.json` ← координаты

## 📚 Документация

- [`docs/guides/QUICK_START_GUIDE.md`](docs/guides/QUICK_START_GUIDE.md) - Быстрый старт
- [`docs/guides/REPLIT_PRODUCTION_UPDATE.md`](docs/guides/REPLIT_PRODUCTION_UPDATE.md) - Обновление Replit
- [`docs/guides/API_DATABASE_INTEGRATION.md`](docs/guides/API_DATABASE_INTEGRATION.md) - API интеграция

## 🤝 Команда

**Muzaquest Team** - Интеллектуальная аналитика для ресторанного бизнеса на Бали

## 📄 Лицензия

MIT License - см. [LICENSE](LICENSE)