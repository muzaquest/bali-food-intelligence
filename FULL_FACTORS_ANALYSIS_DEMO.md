# üîç –ü–û–õ–ù–´–ô –°–ü–ò–°–û–ö –í–°–ï–• –§–ê–ö–¢–û–†–û–í –í –°–ò–°–¢–ï–ú–ï

## üéØ **–û–¢–í–ï–¢ –ù–ê –í–û–ü–†–û–°:**

**–î–∞, –í–°–ï —Ñ–∞–∫—Ç–æ—Ä—ã –±—É–¥—É—Ç –≤ –æ—Ç—á–µ—Ç–µ!** üéâ  

–í –ø—Ä–∏–º–µ—Ä–µ —è –ø–æ–∫–∞–∑–∞–ª —Ç–æ–ª—å–∫–æ **—Ç–æ–ø-2**, –Ω–æ —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç **–í–°–ï 15+ —Ñ–∞–∫—Ç–æ—Ä–æ–≤**, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∏.

---

## üìä **–ü–û–õ–ù–´–ô –ü–†–ò–ú–ï–† –û–¢–ß–ï–¢–ê –î–õ–Ø 2025-05-15:**

### **üîç –î–ï–¢–ï–ö–¢–ò–í–ù–´–ï –§–ê–ö–¢–û–†–´ (–í–°–ï):**

```
üìâ –ü–†–û–ë–õ–ï–ú–ù–´–ô –î–ï–ù–¨ #1: 2025-05-15
   üíî –ü–∞–¥–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂: -67.8% (1,250,000 IDR vs —Å—Ä–µ–¥–Ω–µ–µ 3,876,543 IDR)
   
   üîç –î–ï–¢–ï–ö–¢–ò–í–ù–´–ï –§–ê–ö–¢–û–†–´:
      1. üö® –ö–†–ò–¢–ò–ß–ù–û: Grab offline 357% (–Ω–æ—Ä–º–∞ <50%)
      2. ‚è±Ô∏è Gojek Preparation 45.2–º–∏–Ω (+89% –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ)
      3. üöö Gojek Delivery 38.7–º–∏–Ω (+62% –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ)  
      4. üåßÔ∏è –°–∏–ª—å–Ω—ã–π –¥–æ–∂–¥—å (12.8–º–º)
      5. üéâ –ü—Ä–∞–∑–¥–Ω–∏–∫: Purnama (Full Moon) - Balinese
      6. ‚≠ê –ù–∏–∑–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥ Gojek: 4.2
      7. üí∞ –ù–∏–∑–∫–∏–π ROAS Grab: 0.8 (–∫—Ä–∏—Ç–∏—á–Ω–æ <1.0)
      8. üõµ Gojek –∑–∞–∫—Ä—ã—Ç: 5—á 57–º–∏–Ω (–∫—Ä–∏—Ç–∏—á–Ω–æ >2—á)
      9. ‚è∞ Grab Driver Waiting: 12.4–º–∏–Ω (+45% –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ)
      10. üìÖ –°—Ä–µ–¥–∞ (–æ–±—ã—á–Ω–æ -15% –æ—Ç –≤—ã—Ö–æ–¥–Ω—ã—Ö)
      
   üìä –û–ë–©–ò–ô IMPACT SCORE: 185 –±–∞–ª–ª–æ–≤ (–∫—Ä–∏—Ç–∏—á–Ω–æ >100)
```

### **üß† ML –û–ë–™–Ø–°–ù–ï–ù–ò–ï (SHAP) - –í–°–ï –§–ê–ö–¢–û–†–´:**

```
   üß† ML –û–ë–™–Ø–°–ù–ï–ù–ò–ï (SHAP):
      üí∞ –†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏: 1,250,000 IDR
      ü§ñ ML –ø—Ä–æ–≥–Ω–æ–∑: 3,876,543 IDR  
      üìä –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: -67.8% (-2,626,543 IDR)
      
      üîç –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –í–õ–ò–Ø–ù–ò–Ø:
         1. üö® üì± Grab offline (357%): -45.2% –≤–ª–∏—è–Ω–∏—è (-1,751,234 IDR)
         2. üö® ‚è±Ô∏è –í—Ä–µ–º—è –≥–æ—Ç–æ–≤–∫–∏ (45.2–º–∏–Ω): -12.8% –≤–ª–∏—è–Ω–∏—è (-495,637 IDR)  
         3. üö® üåßÔ∏è –î–æ–∂–¥—å (12.8–º–º): -8.4% –≤–ª–∏—è–Ω–∏—è (-325,430 IDR)
         4. üö® üéâ –ü—Ä–∞–∑–¥–Ω–∏–∫ (Purnama): -6.1% –≤–ª–∏—è–Ω–∏—è (-236,209 IDR)
         5. ‚ö†Ô∏è üöö –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ (38.7–º–∏–Ω): -4.3% –≤–ª–∏—è–Ω–∏—è (-166,651 IDR)
         6. ‚ö†Ô∏è ‚≠ê –†–µ–π—Ç–∏–Ω–≥ (4.2): -3.2% –≤–ª–∏—è–Ω–∏—è (-124,049 IDR)
         7. ‚ö†Ô∏è üõµ Gojek –∑–∞–∫—Ä—ã—Ç (5—á57–º): -2.9% –≤–ª–∏—è–Ω–∏—è (-112,360 IDR)
         8. ‚ö†Ô∏è üí∞ ROAS (0.8): -2.1% –≤–ª–∏—è–Ω–∏—è (-81,327 IDR)
         9. ‚ö†Ô∏è ‚è∞ Driver Waiting (12.4–º–∏–Ω): -1.8% –≤–ª–∏—è–Ω–∏—è (-69,738 IDR)
         10. ‚ö†Ô∏è üìÖ –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (—Å—Ä–µ–¥–∞): -1.2% –≤–ª–∏—è–Ω–∏—è (-46,518 IDR)
         
      üí° ML –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
         ‚Ä¢ –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è Grab = –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª +1,751,234 IDR
         ‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≥–æ—Ç–æ–≤–∫–∏ = –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª +495,637 IDR  
         ‚Ä¢ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ –¥–æ–∂–¥—å = –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª +325,430 IDR
         ‚Ä¢ –£—á–µ—Ç –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ = –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª +236,209 IDR
         ‚Ä¢ –£–ª—É—á—à–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ = –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª +124,049 IDR
         
      üéØ –°–£–ú–ú–ê–†–ù–´–ô –ü–û–¢–ï–ù–¶–ò–ê–õ: +2,932,559 IDR (+234.6%)
```

### **ü§ñ ML –°–í–û–î–ö–ê - –í–°–ï –î–†–ê–ô–í–ï–†–´:**

```
ü§ñ ML –°–í–û–î–ö–ê –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:

üèÜ –ì–õ–ê–í–ù–´–ï –î–†–ê–ô–í–ï–†–´ –ü–†–û–î–ê–ñ (–≤–∞–∂–Ω–æ—Å—Ç—å –≤ ML –º–æ–¥–µ–ª–∏):
   1. üì± –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º: 42.1% –≤–∞–∂–Ω–æ—Å—Ç–∏
   2. ‚è±Ô∏è –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞: 28.6% –≤–∞–∂–Ω–æ—Å—Ç–∏  
   3. üå§Ô∏è –ü–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è: 12.3% –≤–∞–∂–Ω–æ—Å—Ç–∏
   4. üéâ –ü—Ä–∞–∑–¥–Ω–∏–∫–∏ –∏ —Å–æ–±—ã—Ç–∏—è: 8.7% –≤–∞–∂–Ω–æ—Å—Ç–∏
   5. ‚≠ê –ö–∞—á–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–∏—Å–∞: 4.9% –≤–∞–∂–Ω–æ—Å—Ç–∏
   6. üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã: 3.4% –≤–∞–∂–Ω–æ—Å—Ç–∏

üí° –°–¢–†–ê–¢–ï–ì–ò–ß–ï–°–ö–ò–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
   1. üö® –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç–æ—Ä
   2. ‚è±Ô∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω  
   3. üå§Ô∏è –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
   4. üéâ –£—á–µ—Ç –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤ –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
   5. üí∞ –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –±—é–¥–∂–µ—Ç–æ–≤
   6. ‚≠ê –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è

üéØ –û–ë–©–ò–ô –ü–û–¢–ï–ù–¶–ò–ê–õ –†–û–°–¢–ê: +29.4M IDR/–º–µ—Å—è—Ü (38.2%)
```

---

## ‚úÖ **–í–°–ï 15+ –§–ê–ö–¢–û–†–û–í –í–ö–õ–Æ–ß–ï–ù–´:**

### **üîß –û–ü–ï–†–ê–¶–ò–û–ù–ù–´–ï –§–ê–ö–¢–û–†–´:**
- [x] **Grab offline rate** (–∫—Ä–∏—Ç–∏—á–Ω–æ >50%)
- [x] **Gojek close time** (–ø—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞)  
- [x] **Preparation time** + –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ
- [x] **Delivery time** + –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ
- [x] **Driver waiting time** (Grab + Gojek) + –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è

### **üå§Ô∏è –í–ù–ï–®–ù–ò–ï –§–ê–ö–¢–û–†–´:**
- [x] **–ü–æ–≥–æ–¥–∞** (–¥–æ–∂–¥—å, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞) —á–µ—Ä–µ–∑ Open-Meteo API
- [x] **–ü—Ä–∞–∑–¥–Ω–∏–∫–∏** (164 –ø—Ä–∞–∑–¥–Ω–∏–∫–∞: Balinese, Muslim, International)
- [x] **–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏** (–≤—ã—Ö–æ–¥–Ω—ã–µ vs –±—É–¥–Ω–∏)

### **üí∞ –ú–ê–†–ö–ï–¢–ò–ù–ì –ò –ö–ê–ß–ï–°–¢–í–û:**
- [x] **ROAS** (Grab + Gojek advertising efficiency)
- [x] **Ads spend** (—Ä–µ–∫–ª–∞–º–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã)
- [x] **Ratings** (Grab + Gojek ratings)
- [x] **Impressions** (–ø–æ–∫–∞–∑—ã —Ä–µ–∫–ª–∞–º—ã)

### **üìä –ò–°–¢–û–†–ò–ß–ï–°–ö–ò–ï –î–ê–ù–ù–´–ï:**
- [x] **7-day average** (—Å–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ –∑–∞ –Ω–µ–¥–µ–ª—é)
- [x] **30-day average** (—Å–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ –∑–∞ –º–µ—Å—è—Ü)
- [x] **Monthly averages** –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π

### **üéØ –ë–ò–ó–ù–ï–° –ú–ï–¢–†–ò–ö–ò:**
- [x] **Total orders** (–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤)
- [x] **Platform split** (Grab vs Gojek performance)

---

## üö® **–ù–ê–ô–î–ï–ù–ê –ü–†–û–ë–õ–ï–ú–ê:**

**‚ùå ML –º–æ–¥–µ–ª—å –ù–ï –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–≥–æ–¥—É!**  

–î–µ—Ç–µ–∫—Ç–∏–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —É—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ–≥–æ–¥—É, –Ω–æ ML –º–æ–¥–µ–ª—å –µ—ë –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤.

### **üîß –ù–£–ñ–ù–û –ò–°–ü–†–ê–í–ò–¢–¨:**

```python
# –í src/analyzers/integrated_ml_detective.py –¥–æ–±–∞–≤–∏—Ç—å:

def _prepare_features_for_date(self, restaurant_name, target_date):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
    
    # –î–û–ë–ê–í–ò–¢–¨ –ü–û–ì–û–î–£:
    weather_data = self.detective._get_weather_data(restaurant_name, target_date)
    if weather_data:
        features['precipitation'] = weather_data['precipitation']
        features['temperature'] = weather_data['temperature']
    else:
        features['precipitation'] = 0
        features['temperature'] = 27  # —Å—Ä–µ–¥–Ω—è—è –¥–ª—è –ë–∞–ª–∏
        
    return features

# –ò –æ–±–Ω–æ–≤–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –Ω–∞–∑–≤–∞–Ω–∏–π:
name_mapping = {
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ ...
    'precipitation': 'üåßÔ∏è –û—Å–∞–¥–∫–∏ (–º–º)',
    'temperature': 'üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (¬∞C)'
}
```

---

## üéØ **–ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø ML –ë–£–î–ï–¢ –í–ö–õ–Æ–ß–ê–¢–¨:**

### **–í–°–ï 17 –§–ê–ö–¢–û–†–û–í:**
1. üì± Grab offline rate
2. üõµ Gojek –∑–∞–∫—Ä—ã—Ç  
3. ‚è±Ô∏è –í—Ä–µ–º—è –≥–æ—Ç–æ–≤–∫–∏
4. üöö –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏
5. ‚è∞ –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤–æ–¥–∏—Ç–µ–ª—è (Grab)
6. ‚è∞ –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤–æ–¥–∏—Ç–µ–ª—è (Gojek)
7. üåßÔ∏è **–û—Å–∞–¥–∫–∏** (NEW!)
8. üå°Ô∏è **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞** (NEW!)
9. üéâ –ü—Ä–∞–∑–¥–Ω–∏–∫–∏
10. üìÖ –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏
11. üìÖ –í—ã—Ö–æ–¥–Ω–æ–π/–±—É–¥–Ω–∏
12. üí∞ –†–∞—Å—Ö–æ–¥—ã –Ω–∞ —Ä–µ–∫–ª–∞–º—É
13. üìä –ü–æ–∫–∞–∑—ã —Ä–µ–∫–ª–∞–º—ã
14. ‚≠ê –†–µ–π—Ç–∏–Ω–≥
15. üìà –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏ (7 –¥–Ω–µ–π)
16. üìà –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏ (30 –¥–Ω–µ–π)
17. üìä –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤

---

## üèÜ **–ò–¢–û–ì:**

**‚úÖ –í–°–ï –§–ê–ö–¢–û–†–´ –£–ñ–ï –í –î–ï–¢–ï–ö–¢–ò–í–ù–û–ú –ê–ù–ê–õ–ò–ó–ï**  
**‚ö†Ô∏è ML –ú–û–î–ï–õ–¨ –ù–£–ñ–î–ê–ï–¢–°–Ø –í –î–û–†–ê–ë–û–¢–ö–ï** (–¥–æ–±–∞–≤–∏—Ç—å –ø–æ–≥–æ–¥—É)  
**üéØ –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø = 17 –§–ê–ö–¢–û–†–û–í –í ML**  

**–í –ø—Ä–∏–º–µ—Ä–µ —è –ø–æ–∫–∞–∑–∞–ª —Ç–æ–ª—å–∫–æ —Ç–æ–ø-2, –Ω–æ —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –í–°–ï —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –Ω–∞–º–∏ —Ñ–∞–∫—Ç–æ—Ä—ã! üöÄ**